<!DOCTYPE html>
<html lang="en">
<head>
<base href="https://cdn.jsdelivr.net/gh/gn-math/gn-math.github.io@main/">
<link rel="icon" type="image/png" href="favicon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/favicon.png" />
<link rel="apple-touch-icon" href="/favicon.png" />
<script>
  window.addEventListener('beforeunload', function (event) {
    event.preventDefault();
    event.returnValue = '';
    return 'Are you sure you want to leave? Any unsaved changes will be lost.';
  });
</script>
<!-- Optional: ad scripts can be deferred or removed for performance -->
<!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-WX5VS54ZDW"></script> -->
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>gn-math - Space Theme</title>
<meta name="title" content="GN-Math Space" />
<meta name="description" content="Space-themed games on GN-Math. Explore the universe of learning!" />

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WX5VS54ZDW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-WX5VS54ZDW');
</script>

<style>
/* --- Space Theme CSS --- */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

:root {
  --primary: #1e90ff; /* Bright blue for space accents */
  --primary-hover: #00ffff; /* Cyan hover */
  --accent: #8a2be2; /* BlueViolet for accents */
  --success: #00ff7f; /* Spring green for success */
  --warning: #ffd700; /* Gold for warnings */
  --text: #FFFFFF; /* White text for space clarity */
  --bg: #000000; /* Pure black for space background */
  --surface: #222; /* Dark surface for contrast */
  --border: #FFFFFF; /* White borders for clarity */
  --radius: 12px;
  --font-family: 'Press Start 2 P', cursive, sans-serif;
}

body {
  font-family: var(--font-family);
  line-height: 1.6;
  margin: 0;
  padding: 0;
  background: linear-gradient(to bottom, #000000, #0b0b3d);
  color: var(--text);
  background-image: 
    radial-gradient(circle at top right, #1e90ff, transparent 70%), 
    radial-gradient(circle at bottom left, #8a2be2, transparent 70%);
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Header with space-inspired gradient and glow */
header {
  background: linear-gradient(45deg, #1e90ff, #8a2be2);
  color: var(--text);
  font-family: var(--font-family);
  position: sticky;
  top: 0;
  z-index: 100;
  padding: 1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 0 15px rgba(255,255,255,0.3);
  animation: glitch 2s infinite;
}

/* Glitch/glow animation */
@keyframes glitch {
  0% { transform: translate(0); }
  20% { transform: translate(-2px, 0); }
  40% { transform: translate(2px, 0); }
  60% { transform: translate(-2px, 0); }
  80% { transform: translate(2px, 0); }
  100% { transform: translate(0); }
}

.logo {
  font-size: 1.75rem;
  font-weight: 800;
  background: linear-gradient(135deg, #1e90ff, #00ffff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 0 10px #FFF, 0 0 20px #0ff;
}

/* Search and controls styling with space colors */
.search-container {
  display: flex;
  flex: 1;
  max-width: 500px;
  gap: 0.75rem;
}
#searchBar {
  flex: 1;
  padding: 0.875rem 1rem;
  border: 2px solid #FFFFFF;
  border-radius: var(--radius);
  background: #111;
  color: #FFF;
  font-family: var(--font-family);
  font-size: 15px;
  outline: none;
  transition: all 0.3s ease;
}
#searchBar:focus {
  background: #333;
  border-color: #00ffff;
  box-shadow: 0 0 10px #00ffff, inset 0 0 10px #00ffff;
}
#sortOptions {
  padding: 0.875rem 1rem;
  border: 2px solid #FFFFFF;
  border-radius: var(--radius);
  background: #111;
  color: #FFF;
  font-family: var(--font-family);
  font-size: 15px;
  cursor: pointer;
  transition: all 0.3s ease;
}
#sortOptions:hover {
  background: #333;
  border-color: #00ffff;
  box-shadow: 0 0 10px #00ffff;
}
/* Control buttons styling with space glow */
.control-buttons {
  display: flex;
  gap: 0.5rem;
}
#settings {
  background: linear-gradient(45deg, #1e90ff, #8a2be2);
  border: none;
  color: #FFF;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 0.75rem;
  border-radius: var(--radius);
  box-shadow: 0 0 10px #FFF, 0 0 20px #0ff;
}
#settings:hover {
  box-shadow: 0 0 20px #FFF, inset 0 0 20px #0ff;
}
main {
  padding: 2rem 1rem;
  max-width: 1200px;
  margin: auto;
}
/* Zone grid styles with space-themed borders and glow */
#container, #featuredZones {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1.5rem;
}
.zone-item {
  background: #222;
  border: 2px solid #FFF;
  border-radius: var(--radius);
  overflow: hidden;
  cursor: pointer;
  transition: all 0.4s ease;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 10px #1e90ff, inset 0 0 10px #1e90ff;
}
.zone-item:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 0 20px #1e90ff, inset 0 0 20px #1e90ff;
  border-color: #00ffff;
}
.zone-item img {
  width: 100%;
  aspect-ratio: 1;
  object-fit: cover;
  display: block;
  transition: transform 0.4s ease;
}
.zone-item:hover img {
  transform: scale(1.05);
}
.zone-item button {
  background: transparent;
  color: #00ffff;
  border: none;
  padding: 1.25rem 1rem;
  cursor: pointer;
  font-weight: bold;
  font-size: 14px;
  text-shadow: 0 0 5px #FFF;
  transition: all 0.3s ease;
}
.zone-item:hover button {
  color: #1e90ff;
  background: rgba(255,255,255,0.1);
}
/* Zone viewer overlay with glow, space style */
#zoneViewer {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  z-index: 1000;
  display: none;
  flex-direction: column;
  animation: slideInUp 0.3s ease;
}
@keyframes slideInUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}
/* Zone header inside viewer with space theme */
.zone-header {
  background: linear-gradient(45deg, #1e90ff, #8a2be2);
  color: #FFF;
  padding: 1rem 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 2px solid #FFF;
}
#zoneName {
  font-size: 1.25rem;
  font-weight: bold;
  margin: 0;
  text-shadow: 0 0 5px #FFF, 0 0 10px #1e90ff;
}
#zoneAuthor {
  font-size: 14px;
  color: #FFF;
  text-decoration: underline;
}
.zone-controls {
  display: flex;
  gap: 0.75rem;
}
.zone-controls button {
  background: #222;
  border: 2px solid #FFF;
  color: #FFF;
  padding: 0.625rem 1rem;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 14px;
  font-weight: bold;
  transition: all 0.3s ease;
}
.zone-controls button:hover {
  background: #444;
  border-color: #00ffff;
  box-shadow: 0 0 10px #00ffff;
}
#zoneFrame {
  flex: 1;
  border: none;
  width: 100%;
  height: calc(100vh - 80px);
}
/* Popup overlay with glow and space style */
#popupOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 1rem;
}
.popup {
  background: #222;
  border: 2px solid #00ffff;
  border-radius: var(--radius);
  max-width: 520px;
  width: 100%;
  max-height: 80vh;
  overflow: auto;
  padding: 1rem;
  box-shadow: 0 0 20px #00ffff, inset 0 0 20px #00ffff;
  animation: slideInScale 0.3s ease;
}
@keyframes slideInScale {
  from { transform: scale(0.9) translateY(20px); opacity: 0; }
  to { transform: scale(1) translateY(0); opacity: 1; }
}
.popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}
#popupTitle {
  margin: 0;
  font-size: 1.25rem;
  font-weight: bold;
  color: #00ffff;
}
#popupClose {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: #00ffff;
  cursor: pointer;
}
#popupClose:hover {
  color: #1e90ff;
}
#popupBody {
  color: #FFF;
}
/* Settings button style */
#settings-button {
  width: 100%;
  padding: 0.875rem 1rem;
  background: linear-gradient(45deg, #1e90ff, #8a2be2);
  border: none;
  border-radius: var(--radius);
  color: #FFF;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 0 10px #FFF, 0 0 20px #00ffff;
}
#settings-button:hover {
  box-shadow: 0 0 20px #FFF, inset 0 0 20px #00ffff;
}
/* Footer with glow and space colors */
footer {
  background: linear-gradient(45deg, #1e90ff, #8a2be2);
  color: #FFF;
  text-align: center;
  padding: 1rem;
  font-family: var(--font-family);
  font-size: 12px;
  position: fixed;
  bottom: 0;
  width: 100%;
  z-index: 100;
  box-shadow: 0 -0 15px rgba(255,255,255,0.3);
}
/* Responsive adjustments */
@media(max-width: 768px) {
  header {
    flex-direction: column;
    align-items: flex-start;
  }
  #searchBar {
    width: 100%;
  }
  main {
    padding: 1.5rem 1rem;
  }
  #container, #featuredZones {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  }
}
</style>
</head>
<body>
<header>
<div class="header-content" style="display:flex; align-items:center; justify-content:space-between; width:100%;">
<div class="logo">üåå gn-math üå†</div>
<div class="search-container" style="display:flex; align-items:center; gap:0.75rem;">
<input type="text" id="searchBar" placeholder="Search zones..." oninput="filterZones()" />
<select id="sortOptions" onchange="sortZones()">
<option value="name">Name</option>
<option value="id">ID (Date)</option>
<option value="popular">Popular</option>
</select>
</div>
<div class="control-buttons">
<button id="settings" style="background:linear-gradient(45deg, #1e90ff, #8a2be2);" onclick="/* your settings logic */"> üöÄ </button>
</div>
</div>
</header>
<!-- Main content -->
<main>
<details id="featuredZonesWrapper" open>
<summary id="allZonesSummary" style="font-size: 1.2rem; font-weight: bold; cursor: pointer;">üåå Featured Zones üåå</summary>
<div id="featuredZones" class="zone-container"></div>
</details>
<br /><hr /><br />
<details id="allZonesWrapper" open>
<summary id="allSummary" style="font-size: 1.2rem; font-weight: bold; cursor: pointer;">üöÄ All Zones üöÄ</summary>
<div id="container">Loading...</div>
</details>
</main>
<!-- Zone viewer overlay -->
<div id="zoneViewer" style="display: none;">
<div class="zone-header">
<div class="zone-title">
<h2 id="zoneName">Zone Name</h2>
<span id="zoneId" style="display:none;"></span>
<a id="zoneAuthor" href="#" target="_blank" style="color:#FFF;">by Author</a>
</div>
<div class="zone-controls">
<button onclick="fullscreenZone()">üé•</button>
<button onclick="aboutBlank()">üåê</button>
<button onclick="downloadZone()">üíæ</button>
<button onclick="closeZone()">‚úñ</button>
</div>
</div>
<iframe id="zoneFrame"></iframe>
</div>
<!-- Popup overlay -->
<div id="popupOverlay" style="display: none;">
<div class="popup">
<div class="popup-header">
<h3 id="popupTitle">Title</h3>
<button id="popupClose" onclick="closePopup()">√ó</button>
</div>
<div id="popupBody">Content will be here</div>
</div>
</div>
<!-- Scripts -->
<script>
// Static sample zones data for testing
const zones = [
  {
    "name": "Space Zone 1",
    "id": 1,
    "cover": "https://images.unsplash.com/photo-1477958675604-1ed6e0f2f6f1",
    "url": "https://example.com/space-zone-1",
    "author": "NASA",
    "authorLink": "https://nasa.gov"
  },
  {
    "name": "Space Zone 2",
    "id": 2,
    "cover": "https://images.unsplash.com/photo-1506744038136-46273834b3fb",
    "url": "https://example.com/space-zone-2",
    "author": "ESA",
    "authorLink": "https://esa.int"
  }
];

const coverURL = "https://cdn.jsdelivr.net/gh/gn-math/covers@main";
const htmlURL = "https://cdn.jsdelivr.net/gh/gn-math/html@main";

const searchBar = document.getElementById('searchBar');
const sortOptions = document.getElementById('sortOptions');

function displayZones(zones) {
  const container = document.getElementById('container');
  container.innerHTML = "";
  zones.forEach((file) => {
    const zoneItem = document.createElement("div");
    zoneItem.className = "zone-item";
    zoneItem.onclick = () => openZone(file);
    const img = document.createElement("img");
    img.dataset.src = file.cover; // use direct URL
    img.alt = file.name;
    img.loading = "lazy";
    img.className = "lazy-zone-img";
    zoneItem.appendChild(img);
    const button = document.createElement("button");
    button.textContent = file.name;
    button.onclick = (event) => {
      event.stopPropagation();
      openZone(file);
    };
    zoneItem.appendChild(button);
    container.appendChild(zoneItem);
  });
  document.getElementById("allSummary").textContent = `All Zones (${zones.length})`;
  // Lazy load images
  const lazyImages = document.querySelectorAll('img.lazy-zone-img');
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        img.classList.remove("lazy-zone-img");
        obs.unobserve(img);
      }
    });
  }, { rootMargin: "100px", threshold: 0.1 });
  lazyImages.forEach(img => {
    observer.observe(img);
  });
}

// Initial display
displayZones(zones);

// Functions to open, close, etc.
function openZone(file) {
  if (file.url.startsWith("http")) {
    window.open(file.url, "_blank");
  } else {
    // fallback or error handling
  }
}

function closeZone() {
  document.getElementById('zoneViewer').style.display = "none";
}

function aboutBlank() {
  // implementation...
}

function downloadZone() {
  // implementation...
}

function fullscreenZone() {
  // implementation...
}

function closePopup() {
  document.getElementById('popupOverlay').style.display = "none";
}
</script>
</body>
</html>
