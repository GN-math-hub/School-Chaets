{
  "title": "DeepAI Code Snippet",
  "description": "",
  "head": "<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />",
  "htmlAttrs": "lang=\"en\" class=\"\"",
  "tags": [],
  "activeEditor": "markup",
  "markup": {
    "language": "html",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n   <meta charset=\"utf-8\"/>\n   <meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no\"/>\n   <title>GN-Stream</title>\n   <style>\n       @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');\n       \n       * {\n           box-sizing: border-box;\n           margin: 0;\n           padding: 0;\n           -webkit-tap-highlight-color: transparent;\n       }\n\n       :root {\n           --primary: #e50914;\n           --primary-dark: #b20710;\n           --primary-glow: rgba(229, 9, 20, 0.4);\n           --bg: #000000;\n           --surface: #141414;\n           --surface-light: #1f1f1f;\n           --surface-lighter: #2a2a2a;\n           --text: #ffffff;\n           --text-secondary: #a3a3a3;\n           --text-muted: #6b6b6b;\n           --border: rgba(255,255,255,0.1);\n           --badge-new: #e50914;\n           --badge-popular: #ff6b00;\n           --badge-fan: #ffd600;\n           --badge-trending: #e50914;\n           --badge-scifi: #00a8ff;\n           --badge-horror: #9b59b6;\n           --badge-action: #ff3b30;\n           --glass: rgba(20, 20, 20, 0.95);\n           --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.9);\n           --shadow-glow: 0 0 40px rgba(229, 9, 20, 0.3);\n       }\n\n       html {\n           overflow-x: hidden;\n           scroll-behavior: smooth;\n       }\n\n       body {\n           font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n           background: var(--bg);\n           color: var(--text);\n           min-height: 100vh;\n           overflow-x: hidden;\n           line-height: 1.6;\n           -webkit-font-smoothing: antialiased;\n       }\n\n       body.modal-open {\n           overflow: hidden;\n       }\n\n       /* FIXED: Loading Screen with Anime Background */\n       #loadingScreen {\n           position: fixed;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           background: #000;\n           z-index: 99999;\n           display: flex;\n           flex-direction: column;\n           align-items: center;\n           justify-content: center;\n           overflow: hidden;\n       }\n\n       /* Anime Cyberpunk City Background Layers */\n       .anime-bg-container {\n           position: absolute;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           overflow: hidden;\n           z-index: 0;\n       }\n\n       /* Layer 1: Static City Image with Parallax */\n       .anime-bg-layer {\n           position: absolute;\n           top: -10%;\n           left: -10%;\n           width: 120%;\n           height: 120%;\n           background: url('https://kimi-web-img.moonshot.cn/img/thumbs.dreamstime.com/510da3e618e0888e5afca2d75483c2f378bed91c.jpg') center/cover;\n           filter: blur(2px) brightness(0.4) contrast(1.2);\n           animation: bgPulse 20s ease-in-out infinite, bgDrift 30s linear infinite;\n           transform-origin: center;\n       }\n\n       @keyframes bgPulse {\n           0%, 100% { transform: scale(1) rotate(0deg); filter: blur(2px) brightness(0.4) contrast(1.2); }\n           50% { transform: scale(1.1) rotate(2deg); filter: blur(3px) brightness(0.5) contrast(1.3); }\n       }\n\n       @keyframes bgDrift {\n           0% { transform: translateX(0) scale(1.1); }\n           50% { transform: translateX(-5%) scale(1.15); }\n           100% { transform: translateX(0) scale(1.1); }\n       }\n\n       /* Layer 2: Animated Gradient Overlay */\n       .anime-gradient-overlay {\n           position: absolute;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           background: \n               radial-gradient(ellipse at 20% 80%, rgba(229, 9, 20, 0.3) 0%, transparent 50%),\n               radial-gradient(ellipse at 80% 20%, rgba(138, 43, 226, 0.2) 0%, transparent 50%),\n               radial-gradient(ellipse at 50% 50%, rgba(0, 255, 255, 0.1) 0%, transparent 70%);\n           animation: gradientShift 15s ease infinite;\n           mix-blend-mode: screen;\n       }\n\n       @keyframes gradientShift {\n           0%, 100% { opacity: 0.5; transform: scale(1); }\n           50% { opacity: 0.8; transform: scale(1.2); }\n       }\n\n       /* Layer 3: Scanlines */\n       .scanlines {\n           position: absolute;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           background: linear-gradient(\n               to bottom,\n               rgba(255,255,255,0),\n               rgba(255,255,255,0) 50%,\n               rgba(0,0,0,0.1) 50%,\n               rgba(0,0,0,0.1)\n           );\n           background-size: 100% 4px;\n           animation: scanlineMove 10s linear infinite;\n           pointer-events: none;\n           opacity: 0.3;\n       }\n\n       @keyframes scanlineMove {\n           0% { transform: translateY(0); }\n           100% { transform: translateY(4px); }\n       }\n\n       /* Layer 4: Floating Particles */\n       .particles-container {\n           position: absolute;\n           width: 100%;\n           height: 100%;\n           overflow: hidden;\n           pointer-events: none;\n       }\n\n       .particle {\n           position: absolute;\n           width: 2px;\n           height: 2px;\n           background: #fff;\n           border-radius: 50%;\n           box-shadow: 0 0 10px #fff, 0 0 20px var(--primary);\n           animation: floatUp 15s infinite linear;\n           opacity: 0;\n       }\n\n       .particle:nth-child(3n) {\n           background: #00ffff;\n           box-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;\n       }\n\n       .particle:nth-child(5n) {\n           background: #ff00ff;\n           box-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;\n       }\n\n       @keyframes floatUp {\n           0% {\n               transform: translateY(100vh) translateX(0) scale(0);\n               opacity: 0;\n           }\n           10% {\n               opacity: 1;\n               transform: translateY(90vh) translateX(10px) scale(1);\n           }\n           90% {\n               opacity: 1;\n               transform: translateY(-10vh) translateX(-10px) scale(1);\n           }\n           100% {\n               transform: translateY(-20vh) translateX(0) scale(0);\n               opacity: 0;\n           }\n       }\n\n       /* Layer 5: Neon Grid Floor */\n       .neon-grid {\n           position: absolute;\n           bottom: -50%;\n           left: -50%;\n           width: 200%;\n           height: 100%;\n           background-image: \n               linear-gradient(rgba(229, 9, 20, 0.3) 1px, transparent 1px),\n               linear-gradient(90deg, rgba(229, 9, 20, 0.3) 1px, transparent 1px);\n           background-size: 50px 50px;\n           transform: perspective(500px) rotateX(60deg);\n           animation: gridMove 20s linear infinite;\n           opacity: 0.3;\n       }\n\n       @keyframes gridMove {\n           0% { transform: perspective(500px) rotateX(60deg) translateY(0); }\n           100% { transform: perspective(500px) rotateX(60deg) translateY(50px); }\n       }\n\n       /* Layer 6: Vignette */\n       .vignette {\n           position: absolute;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           background: radial-gradient(circle, transparent 40%, rgba(0,0,0,0.8) 100%);\n           pointer-events: none;\n       }\n\n       /* Loading Content - Fixed Z-Index */\n       .loading-content {\n           position: relative;\n           z-index: 10;\n           text-align: center;\n           max-width: 900px;\n           padding: 40px;\n           background: rgba(0, 0, 0, 0.6);\n           backdrop-filter: blur(10px);\n           border-radius: 20px;\n           border: 1px solid rgba(255, 255, 255, 0.1);\n       }\n\n       .loading-logo {\n           font-size: 64px;\n           font-weight: 900;\n           background: linear-gradient(135deg, var(--primary) 0%, #ff0a16 50%, var(--primary) 100%);\n           -webkit-background-clip: text;\n           -webkit-text-fill-color: transparent;\n           letter-spacing: -2px;\n           text-transform: uppercase;\n           margin-bottom: 30px;\n           animation: logoPulse 2s ease-in-out infinite;\n           filter: drop-shadow(0 0 30px rgba(229, 9, 20, 0.8));\n       }\n\n       @keyframes logoPulse {\n           0%, 100% { transform: scale(1); filter: drop-shadow(0 0 30px rgba(229, 9, 20, 0.8)); }\n           50% { transform: scale(1.05); filter: drop-shadow(0 0 50px rgba(229, 9, 20, 1)); }\n       }\n\n       /* Featured Section */\n       .featured-section {\n           margin: 30px 0;\n           opacity: 0;\n           animation: fadeInUp 0.8s ease 0.5s forwards;\n       }\n\n       .featured-label {\n           font-size: 12px;\n           text-transform: uppercase;\n           letter-spacing: 3px;\n           color: var(--primary);\n           margin-bottom: 20px;\n           font-weight: 700;\n           display: flex;\n           align-items: center;\n           justify-content: center;\n           gap: 10px;\n           text-shadow: 0 0 20px rgba(229, 9, 20, 0.5);\n       }\n\n       .featured-label::before,\n       .featured-label::after {\n           content: '';\n           width: 30px;\n           height: 1px;\n           background: linear-gradient(90deg, transparent, var(--primary), transparent);\n       }\n\n       .featured-grid {\n           display: flex;\n           gap: 20px;\n           justify-content: center;\n           flex-wrap: wrap;\n           perspective: 1000px;\n       }\n\n       .featured-card {\n           width: 160px;\n           height: 240px;\n           border-radius: 12px;\n           overflow: hidden;\n           position: relative;\n           cursor: pointer;\n           transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n           box-shadow: 0 10px 30px rgba(0,0,0,0.8), 0 0 0 1px rgba(255,255,255,0.1);\n           transform-style: preserve-3d;\n           background: var(--surface);\n       }\n\n       .featured-card:hover {\n           transform: translateY(-10px) rotateX(5deg) scale(1.05);\n           box-shadow: 0 20px 40px rgba(229, 9, 20, 0.4), 0 0 30px rgba(229, 9, 20, 0.2);\n           z-index: 10;\n       }\n\n       .featured-card img {\n           width: 100%;\n           height: 100%;\n           object-fit: cover;\n           transition: transform 0.4s;\n       }\n\n       .featured-card:hover img {\n           transform: scale(1.1);\n       }\n\n       .featured-card::before {\n           content: '';\n           position: absolute;\n           top: 0;\n           left: 0;\n           right: 0;\n           bottom: 0;\n           background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, transparent 60%);\n           z-index: 1;\n           opacity: 0.7;\n           transition: opacity 0.3s;\n       }\n\n       .featured-card:hover::before {\n           opacity: 0.9;\n       }\n\n       .featured-info {\n           position: absolute;\n           bottom: 0;\n           left: 0;\n           right: 0;\n           padding: 15px;\n           z-index: 2;\n           transform: translateY(10px);\n           opacity: 0;\n           transition: all 0.3s ease;\n       }\n\n       .featured-card:hover .featured-info {\n           transform: translateY(0);\n           opacity: 1;\n       }\n\n       .featured-title {\n           font-size: 14px;\n           font-weight: 700;\n           margin-bottom: 4px;\n           white-space: nowrap;\n           overflow: hidden;\n           text-overflow: ellipsis;\n           color: #fff;\n       }\n\n       .featured-meta {\n           font-size: 11px;\n           color: var(--text-secondary);\n           display: flex;\n           align-items: center;\n           gap: 6px;\n       }\n\n       .featured-badge {\n           position: absolute;\n           top: 10px;\n           right: 10px;\n           background: var(--primary);\n           color: white;\n           padding: 4px 8px;\n           border-radius: 4px;\n           font-size: 10px;\n           font-weight: 800;\n           text-transform: uppercase;\n           z-index: 3;\n           box-shadow: 0 4px 15px rgba(229, 9, 20, 0.6);\n           animation: badgePulse 2s ease-in-out infinite;\n       }\n\n       @keyframes badgePulse {\n           0%, 100% { box-shadow: 0 4px 15px rgba(229, 9, 20, 0.6); }\n           50% { box-shadow: 0 4px 25px rgba(229, 9, 20, 1); }\n       }\n\n       @keyframes fadeInUp {\n           from { opacity: 0; transform: translateY(30px); }\n           to { opacity: 1; transform: translateY(0); }\n       }\n\n       .loading-spinner {\n           width: 60px;\n           height: 60px;\n           border: 4px solid rgba(229, 9, 20, 0.2);\n           border-top-color: var(--primary);\n           border-radius: 50%;\n           animation: spin 1s linear infinite;\n           margin: 30px auto;\n           position: relative;\n           box-shadow: 0 0 20px rgba(229, 9, 20, 0.3);\n       }\n\n       .loading-spinner::before {\n           content: '';\n           position: absolute;\n           top: -10px;\n           left: -10px;\n           right: -10px;\n           bottom: -10px;\n           border: 2px solid transparent;\n           border-top-color: rgba(229, 9, 20, 0.5);\n           border-radius: 50%;\n           animation: spin 2s linear infinite reverse;\n       }\n\n       @keyframes spin {\n           to { transform: rotate(360deg); }\n       }\n\n       .loading-bar {\n           width: 300px;\n           height: 4px;\n           background: rgba(255,255,255,0.1);\n           border-radius: 2px;\n           overflow: hidden;\n           margin: 0 auto 30px;\n           position: relative;\n           box-shadow: 0 0 10px rgba(229, 9, 20, 0.2);\n       }\n\n       .loading-progress {\n           height: 100%;\n           background: linear-gradient(90deg, var(--primary), #ff0a16, var(--primary));\n           background-size: 200% 100%;\n           width: 0%;\n           animation: loadProgress 3s ease-out forwards, shimmer 2s infinite;\n           box-shadow: 0 0 20px var(--primary);\n       }\n\n       @keyframes loadProgress {\n           0% { width: 0%; }\n           100% { width: 100%; }\n       }\n\n       @keyframes shimmer {\n           0% { background-position: -200% 0; }\n           100% { background-position: 200% 0; }\n       }\n\n       .tips-container {\n           min-height: 60px;\n           display: flex;\n           flex-direction: column;\n           align-items: center;\n           justify-content: center;\n           margin-top: 20px;\n       }\n\n       .tips-label {\n           font-size: 12px;\n           text-transform: uppercase;\n           letter-spacing: 2px;\n           color: var(--text-muted);\n           margin-bottom: 8px;\n           font-weight: 600;\n       }\n\n       .tips-text {\n           font-size: 16px;\n           color: var(--text-secondary);\n           font-weight: 500;\n           opacity: 0;\n           animation: tipFade 4s ease-in-out infinite;\n           max-width: 500px;\n           line-height: 1.5;\n       }\n\n       @keyframes tipFade {\n           0%, 20% { opacity: 0; transform: translateY(10px); }\n           25%, 75% { opacity: 1; transform: translateY(0); }\n           80%, 100% { opacity: 0; transform: translateY(-10px); }\n       }\n\n       .loading-stats {\n           margin-top: 20px;\n           font-size: 13px;\n           color: var(--text-muted);\n           font-family: monospace;\n       }\n\n       .loading-stats span {\n           color: var(--primary);\n           font-weight: 600;\n       }\n\n       /* Hide Loading Screen */\n       #loadingScreen.hidden {\n           opacity: 0;\n           visibility: hidden;\n           pointer-events: none;\n           transition: opacity 0.8s ease, visibility 0.8s;\n       }\n\n       /* Main Content Background */\n       .bg-animation {\n           position: fixed;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           z-index: -1;\n           overflow: hidden;\n           background: radial-gradient(ellipse at top, #141414 0%, var(--bg) 50%);\n       }\n\n       .bg-animation::before {\n           content: '';\n           position: absolute;\n           top: -50%;\n           left: -50%;\n           width: 200%;\n           height: 200%;\n           background: radial-gradient(circle at 20% 80%, rgba(229, 9, 20, 0.05) 0%, transparent 50%),\n                       radial-gradient(circle at 80% 20%, rgba(255, 10, 22, 0.03) 0%, transparent 50%);\n           animation: bgPulse 20s ease-in-out infinite;\n       }\n\n       @keyframes bgPulse {\n           0%, 100% { transform: scale(1) rotate(0deg); }\n           50% { transform: scale(1.1) rotate(5deg); }\n       }\n\n       .noise {\n           position: fixed;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           pointer-events: none;\n           z-index: 9999;\n           opacity: 0.02;\n           background-image: url(\"data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\");\n       }\n\n       /* Header */\n       header {\n           position: fixed;\n           top: 0;\n           left: 0;\n           right: 0;\n           height: 70px;\n           background: linear-gradient(to bottom, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.8) 50%, transparent 100%);\n           backdrop-filter: blur(20px) saturate(180%);\n           z-index: 1000;\n           display: flex;\n           align-items: center;\n           justify-content: space-between;\n           padding: 0 4%;\n           transition: all 0.3s ease;\n       }\n\n       header.scrolled {\n           background: rgba(0, 0, 0, 0.98);\n           box-shadow: 0 4px 30px rgba(0,0,0,0.8);\n       }\n\n       .logo {\n           font-size: 28px;\n           font-weight: 900;\n           background: linear-gradient(135deg, var(--primary) 0%, #ff0a16 100%);\n           -webkit-background-clip: text;\n           -webkit-text-fill-color: transparent;\n           letter-spacing: -1px;\n           text-transform: uppercase;\n           cursor: pointer;\n       }\n\n       .nav-links {\n           display: flex;\n           gap: 32px;\n           align-items: center;\n       }\n\n       .nav-links a {\n           color: var(--text-secondary);\n           text-decoration: none;\n           font-size: 14px;\n           font-weight: 600;\n           transition: all 0.3s ease;\n           cursor: pointer;\n           position: relative;\n           padding: 8px 0;\n           text-transform: uppercase;\n           letter-spacing: 0.5px;\n       }\n\n       .nav-links a::before {\n           content: '';\n           position: absolute;\n           bottom: 0;\n           left: 0;\n           width: 100%;\n           height: 2px;\n           background: var(--primary);\n           transform: scaleX(0);\n           transform-origin: right;\n           transition: transform 0.3s ease;\n       }\n\n       .nav-links a:hover, .nav-links a.active {\n           color: var(--text);\n       }\n\n       .nav-links a:hover::before, .nav-links a.active::before {\n           transform: scaleX(1);\n           transform-origin: left;\n       }\n\n       .my-list-badge {\n           background: var(--primary);\n           color: #fff;\n           padding: 2px 8px;\n           border-radius: 12px;\n           font-size: 11px;\n           margin-left: 6px;\n           font-weight: 800;\n       }\n\n       .mobile-menu-btn {\n           display: none;\n           background: none;\n           border: none;\n           color: var(--text);\n           font-size: 24px;\n           cursor: pointer;\n           padding: 8px;\n           border-radius: 8px;\n       }\n\n       .mobile-nav {\n           display: none;\n           position: fixed;\n           top: 70px;\n           left: 0;\n           right: 0;\n           background: var(--glass);\n           backdrop-filter: blur(20px);\n           padding: 20px;\n           z-index: 999;\n           border-bottom: 1px solid var(--border);\n       }\n\n       .mobile-nav.active {\n           display: block;\n           animation: slideDown 0.3s ease;\n       }\n\n       @keyframes slideDown {\n           from { opacity: 0; transform: translateY(-10px); }\n           to { opacity: 1; transform: translateY(0); }\n       }\n\n       .mobile-nav a {\n           display: block;\n           color: var(--text);\n           text-decoration: none;\n           padding: 16px;\n           font-size: 16px;\n           font-weight: 500;\n           border-radius: 12px;\n           margin-bottom: 4px;\n       }\n\n       .server-selector {\n           display: flex;\n           align-items: center;\n           gap: 8px;\n           margin-left: 20px;\n           padding-left: 20px;\n           border-left: 1px solid var(--border);\n       }\n\n       .server-label {\n           color: var(--text-muted);\n           font-size: 12px;\n           font-weight: 600;\n           text-transform: uppercase;\n           letter-spacing: 0.5px;\n       }\n\n       .server-select {\n           background: var(--surface);\n           color: var(--text);\n           border: 1px solid var(--border);\n           border-radius: 6px;\n           padding: 6px 28px 6px 12px;\n           font-size: 13px;\n           font-weight: 500;\n           cursor: pointer;\n           appearance: none;\n           background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b6b6b' d='M6 8L1 3h10z'/%3E%3C/svg%3E\");\n           background-repeat: no-repeat;\n           background-position: right 10px center;\n           transition: all 0.2s;\n           min-width: 140px;\n       }\n\n       .server-select:hover, .server-select:focus {\n           border-color: var(--primary);\n           outline: none;\n       }\n\n       .hero-section {\n           margin-top: 0;\n           min-height: 85vh;\n           display: flex;\n           align-items: flex-end;\n           padding: 80px 4%;\n           padding-bottom: 120px;\n           background: linear-gradient(to top, var(--bg) 0%, transparent 50%), \n                       url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=1920&q=80') center/cover;\n           position: relative;\n       }\n\n       .hero-section::before {\n           content: '';\n           position: absolute;\n           top: 0;\n           left: 0;\n           right: 0;\n           bottom: 0;\n           background: linear-gradient(to right, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);\n       }\n\n       .hero-content {\n           max-width: 800px;\n           position: relative;\n           z-index: 2;\n           animation: fadeInUp 0.8s ease;\n       }\n\n       .hero-title {\n           font-size: 72px;\n           font-weight: 900;\n           margin-bottom: 24px;\n           line-height: 1.1;\n           letter-spacing: -3px;\n           color: #fff;\n           text-shadow: 0 2px 20px rgba(0,0,0,0.5);\n       }\n\n       .hero-subtitle {\n           font-size: 20px;\n           color: var(--text-secondary);\n           margin-bottom: 40px;\n           line-height: 1.7;\n           max-width: 600px;\n       }\n\n       .search-container {\n           display: flex;\n           gap: 12px;\n           max-width: 800px;\n           align-items: stretch;\n       }\n\n       .search-wrapper {\n           flex: 1;\n           position: relative;\n       }\n\n       .search-box {\n           width: 100%;\n           display: flex;\n           align-items: center;\n           background: rgba(255,255,255,0.1);\n           border: 2px solid transparent;\n           border-radius: 8px;\n           padding: 4px 4px 4px 48px;\n           transition: all 0.2s ease;\n           backdrop-filter: blur(10px);\n       }\n\n       .search-box:focus-within {\n           background: rgba(255,255,255,0.15);\n           border-color: var(--primary);\n           box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);\n       }\n\n       .search-icon {\n           position: absolute;\n           left: 16px;\n           top: 50%;\n           transform: translateY(-50%);\n           color: var(--text-muted);\n           font-size: 18px;\n           pointer-events: none;\n           transition: color 0.2s;\n       }\n\n       .search-box:focus-within .search-icon {\n           color: var(--primary);\n       }\n\n       #searchInput {\n           flex: 1;\n           background: transparent;\n           border: none;\n           color: var(--text);\n           font-size: 16px;\n           font-weight: 500;\n           padding: 12px 8px;\n           outline: none;\n       }\n\n       #searchInput::placeholder {\n           color: var(--text-muted);\n       }\n\n       .search-clear {\n           width: 28px;\n           height: 28px;\n           border-radius: 50%;\n           background: rgba(255,255,255,0.1);\n           border: none;\n           color: var(--text-muted);\n           cursor: pointer;\n           display: flex;\n           align-items: center;\n           justify-content: center;\n           font-size: 14px;\n           opacity: 0;\n           transition: all 0.2s;\n           margin-right: 4px;\n       }\n\n       .search-clear.visible {\n           opacity: 1;\n       }\n\n       .search-clear:hover {\n           background: rgba(229, 9, 20, 0.2);\n           color: var(--primary);\n       }\n\n       .search-btn {\n           background: var(--primary);\n           color: #fff;\n           border: none;\n           padding: 0 24px;\n           border-radius: 8px;\n           font-size: 15px;\n           font-weight: 700;\n           cursor: pointer;\n           display: flex;\n           align-items: center;\n           gap: 8px;\n           transition: all 0.2s ease;\n           white-space: nowrap;\n           text-transform: uppercase;\n           letter-spacing: 0.5px;\n       }\n\n       .search-btn:hover {\n           background: var(--primary-dark);\n           transform: translateY(-1px);\n       }\n\n       .search-btn:active {\n           transform: scale(0.98);\n       }\n\n       .filter-wrapper {\n           position: relative;\n           min-width: 140px;\n       }\n\n       #ratingSelect {\n           width: 100%;\n           padding: 14px 36px 14px 16px;\n           border-radius: 8px;\n           font-size: 14px;\n           font-weight: 600;\n           background: rgba(255,255,255,0.1);\n           color: var(--text);\n           border: 2px solid transparent;\n           cursor: pointer;\n           appearance: none;\n           transition: all 0.2s;\n           text-transform: uppercase;\n           letter-spacing: 0.5px;\n       }\n\n       #ratingSelect:hover, #ratingSelect:focus {\n           background: rgba(255,255,255,0.15);\n           border-color: rgba(255,255,255,0.2);\n           outline: none;\n       }\n\n       .filter-arrow {\n           position: absolute;\n           right: 12px;\n           top: 50%;\n           transform: translateY(-50%);\n           color: var(--text-muted);\n           pointer-events: none;\n           font-size: 10px;\n       }\n\n       .category-section {\n           margin: 60px 0;\n           padding: 0 4%;\n       }\n\n       .category-header {\n           display: flex;\n           align-items: center;\n           justify-content: space-between;\n           margin-bottom: 20px;\n       }\n\n       .category-title {\n           font-size: 18px;\n           font-weight: 800;\n           display: flex;\n           align-items: center;\n           gap: 12px;\n           text-transform: uppercase;\n           letter-spacing: 1px;\n           color: var(--text);\n       }\n\n       .category-title::before {\n           content: '';\n           width: 4px;\n           height: 24px;\n           background: var(--primary);\n           border-radius: 2px;\n       }\n\n       .view-all {\n           color: var(--text-secondary);\n           font-size: 13px;\n           font-weight: 600;\n           cursor: pointer;\n           transition: color 0.2s;\n           text-transform: uppercase;\n           letter-spacing: 0.5px;\n       }\n\n       .view-all:hover {\n           color: var(--primary);\n       }\n\n       .row-container {\n           position: relative;\n           margin: 0 -4%;\n           padding: 0 4%;\n       }\n\n       .movie-row {\n           display: flex;\n           gap: 16px;\n           overflow-x: auto;\n           scroll-behavior: smooth;\n           padding: 20px 0;\n           scrollbar-width: thin;\n           scrollbar-color: var(--primary) transparent;\n           scroll-snap-type: x mandatory;\n       }\n\n       .movie-row::-webkit-scrollbar {\n           height: 4px;\n       }\n\n       .movie-row::-webkit-scrollbar-thumb {\n           background: var(--primary);\n           border-radius: 2px;\n       }\n\n       .card {\n           flex: 0 0 auto;\n           border-radius: 4px;\n           overflow: hidden;\n           cursor: pointer;\n           position: relative;\n           transition: transform 0.3s ease, box-shadow 0.3s ease;\n           background: var(--surface);\n           scroll-snap-align: start;\n           width: 160px;\n           height: 240px;\n       }\n\n       .card-medium {\n           width: 200px;\n           height: 300px;\n       }\n\n       .card-large {\n           width: 280px;\n           height: 420px;\n       }\n\n       .card-xl {\n           width: 340px;\n           height: 510px;\n       }\n\n       .card-wide {\n           width: 160px;\n           height: 240px;\n       }\n\n       @media (min-width: 1200px) {\n           .card { width: 180px; height: 270px; }\n           .card-medium { width: 240px; height: 360px; }\n           .card-large { width: 320px; height: 480px; }\n           .card-xl { width: 400px; height: 600px; }\n           .card-wide { width: 180px; height: 270px; }\n       }\n\n       @media (min-width: 1600px) {\n           .card { width: 200px; height: 300px; }\n           .card-medium { width: 280px; height: 420px; }\n           .card-large { width: 380px; height: 570px; }\n           .card-xl { width: 480px; height: 720px; }\n           .card-wide { width: 200px; height: 300px; }\n       }\n\n       .card:hover {\n           transform: scale(1.05);\n           z-index: 10;\n           box-shadow: 0 20px 40px rgba(0,0,0,0.8);\n       }\n\n       .card img {\n           width: 100%;\n           height: 100%;\n           object-fit: cover;\n           display: block;\n       }\n\n       .card-overlay {\n           position: absolute;\n           bottom: 0;\n           left: 0;\n           right: 0;\n           padding: 60px 12px 12px;\n           background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.6) 50%, transparent 100%);\n           opacity: 0;\n           transition: opacity 0.3s;\n       }\n\n       .card:hover .card-overlay {\n           opacity: 1;\n       }\n\n       .card-title {\n           font-size: 14px;\n           font-weight: 700;\n           white-space: nowrap;\n           overflow: hidden;\n           text-overflow: ellipsis;\n           margin-bottom: 4px;\n       }\n\n       .card-rating {\n           font-size: 12px;\n           color: var(--primary);\n           font-weight: 600;\n       }\n\n       .add-to-list-btn {\n           position: absolute;\n           top: 8px;\n           right: 8px;\n           width: 32px;\n           height: 32px;\n           background: rgba(0,0,0,0.6);\n           border: 2px solid rgba(255,255,255,0.3);\n           border-radius: 50%;\n           color: var(--text);\n           cursor: pointer;\n           opacity: 0;\n           transition: all 0.2s;\n           display: flex;\n           align-items: center;\n           justify-content: center;\n           font-size: 18px;\n           z-index: 20;\n       }\n\n       .card:hover .add-to-list-btn {\n           opacity: 1;\n       }\n\n       .add-to-list-btn:hover {\n           background: var(--primary);\n           border-color: var(--primary);\n           color: #fff;\n       }\n\n       .add-to-list-btn.in-list {\n           background: var(--primary);\n           border-color: var(--primary);\n           color: #fff;\n           opacity: 1;\n       }\n\n       .bookmark-badge {\n           position: absolute;\n           top: 0;\n           left: 12px;\n           padding: 6px 10px;\n           font-size: 10px;\n           font-weight: 800;\n           text-transform: uppercase;\n           border-radius: 0 0 4px 4px;\n           z-index: 5;\n           box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n       }\n\n       .badge-new-release { background: var(--badge-new); color: #fff; }\n       .badge-fan-favorite { background: var(--badge-fan); color: #000; }\n       .badge-trending { background: var(--badge-trending); color: #fff; }\n       .badge-binge { background: linear-gradient(135deg, #10b981, #059669); color: #fff; }\n       .badge-scifi { background: var(--badge-scifi); color: #fff; }\n       .badge-horror { background: var(--badge-horror); color: #fff; }\n       .badge-action { background: var(--badge-action); color: #fff; }\n       .badge-romance { background: #ff006e; color: #fff; }\n       .badge-drama { background: #3a86ff; color: #fff; }\n       .badge-thriller { background: #8338ec; color: #fff; }\n       .badge-animation { background: #ffbe0b; color: #000; }\n       .badge-documentary { background: #8b5cf6; color: #fff; }\n       .badge-crime { background: #dc2626; color: #fff; }\n       .badge-mystery { background: #0891b2; color: #fff; }\n       .badge-fantasy { background: #7c3aed; color: #fff; }\n       .badge-family { background: #10b981; color: #fff; }\n       .badge-adventure { background: #f59e0b; color: #000; }\n\n       .progress-bar {\n           position: absolute;\n           bottom: 0;\n           left: 0;\n           right: 0;\n           height: 3px;\n           background: rgba(255,255,255,0.2);\n       }\n\n       .progress-fill {\n           height: 100%;\n           background: var(--primary);\n       }\n\n       #continueWatchingSection, #nowPlayingSection, #myListSection, #newEpisodesSection {\n           display: none;\n           padding: 30px 4%;\n           margin: 20px 0;\n       }\n\n       #continueWatchingSection.active, #nowPlayingSection.active, #myListSection.active, #newEpisodesSection.active {\n           display: block;\n           animation: fadeIn 0.4s ease;\n       }\n\n       @keyframes fadeIn {\n           from { opacity: 0; }\n           to { opacity: 1; }\n       }\n\n       #detailsModal {\n           position: fixed;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           background: rgba(0,0,0,0.95);\n           display: none;\n           align-items: flex-start;\n           justify-content: center;\n           z-index: 10000;\n           padding: 40px 20px;\n           overflow-y: auto;\n           opacity: 0;\n           transition: opacity 0.3s ease;\n       }\n\n       #detailsModal.active {\n           display: flex;\n           opacity: 1;\n       }\n\n       #detailsContent {\n           width: 100%;\n           max-width: 900px;\n           background: var(--surface);\n           border-radius: 12px;\n           overflow: hidden;\n           border: 1px solid var(--border);\n           transform: scale(0.95);\n           opacity: 0;\n           transition: all 0.3s ease;\n       }\n\n       #detailsModal.active #detailsContent {\n           transform: scale(1);\n           opacity: 1;\n       }\n\n       #posterContainer {\n           position: relative;\n           width: 100%;\n           padding-bottom: 56.25%;\n           background: #000;\n       }\n\n       #posterImage {\n           position: absolute;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           object-fit: cover;\n       }\n\n       .modal-close-btn {\n           position: fixed;\n           top: 20px;\n           right: 20px;\n           width: 44px;\n           height: 44px;\n           background: rgba(0,0,0,0.8);\n           border: 1px solid rgba(255,255,255,0.2);\n           color: var(--text);\n           border-radius: 50%;\n           font-size: 20px;\n           cursor: pointer;\n           z-index: 10001;\n           display: flex;\n           align-items: center;\n           justify-content: center;\n           transition: all 0.2s;\n       }\n\n       .modal-close-btn:hover {\n           background: var(--primary);\n           color: #fff;\n           transform: rotate(90deg);\n       }\n\n       .details-info {\n           padding: 30px;\n           margin-top: -60px;\n           position: relative;\n           z-index: 2;\n       }\n\n       .details-title {\n           font-size: 32px;\n           font-weight: 800;\n           margin-bottom: 12px;\n       }\n\n       .details-meta {\n           display: flex;\n           gap: 12px;\n           align-items: center;\n           margin-bottom: 20px;\n           flex-wrap: wrap;\n           color: var(--text-secondary);\n           font-size: 14px;\n       }\n\n       .details-rating {\n           background: var(--primary);\n           color: #fff;\n           padding: 4px 10px;\n           border-radius: 4px;\n           font-weight: 800;\n           font-size: 12px;\n       }\n\n       .match-score {\n           color: var(--primary);\n           font-weight: 700;\n       }\n\n       .details-actions {\n           display: flex;\n           gap: 10px;\n           margin-bottom: 20px;\n           flex-wrap: wrap;\n       }\n\n       .btn-primary, .btn-secondary, .btn-download {\n           padding: 12px 24px;\n           border-radius: 8px;\n           font-size: 14px;\n           font-weight: 700;\n           cursor: pointer;\n           border: none;\n           display: flex;\n           align-items: center;\n           gap: 8px;\n           transition: all 0.2s;\n           text-transform: uppercase;\n           letter-spacing: 0.5px;\n       }\n\n       .btn-primary {\n           background: var(--text);\n           color: #000;\n       }\n\n       .btn-primary:hover {\n           background: rgba(255,255,255,0.9);\n           transform: translateY(-1px);\n       }\n\n       .btn-secondary {\n           background: rgba(255,255,255,0.1);\n           color: var(--text);\n       }\n\n       .btn-secondary:hover {\n           background: rgba(255,255,255,0.2);\n       }\n\n       .btn-download {\n           background: var(--primary);\n           color: #fff;\n       }\n\n       .btn-red {\n           background: var(--primary) !important;\n           color: #fff !important;\n       }\n\n       #detailsBody {\n           padding: 0 30px 30px;\n       }\n\n       .details-section {\n           margin-bottom: 24px;\n       }\n\n       .details-section h3 {\n           font-size: 12px;\n           text-transform: uppercase;\n           color: var(--text-muted);\n           margin-bottom: 12px;\n           letter-spacing: 1px;\n           font-weight: 700;\n       }\n\n       .details-section p {\n           color: var(--text-secondary);\n           line-height: 1.7;\n           font-size: 15px;\n       }\n\n       .cast-list {\n           display: flex;\n           gap: 8px;\n           flex-wrap: wrap;\n       }\n\n       .cast-member {\n           background: var(--surface-light);\n           padding: 8px 16px;\n           border-radius: 20px;\n           font-size: 13px;\n           border: 1px solid var(--border);\n           font-weight: 500;\n       }\n\n       .episode-selector {\n           background: var(--surface-light);\n           border-radius: 12px;\n           padding: 20px;\n           margin-top: 20px;\n           border: 1px solid var(--border);\n       }\n\n       .selector-row {\n           display: flex;\n           gap: 12px;\n           margin-bottom: 16px;\n           align-items: center;\n       }\n\n       .selector-label {\n           font-size: 12px;\n           color: var(--text-muted);\n           min-width: 70px;\n           text-transform: uppercase;\n           font-weight: 700;\n           letter-spacing: 0.5px;\n       }\n\n       .selector-select {\n           flex: 1;\n           padding: 12px 16px;\n           background: var(--surface);\n           border: 1px solid var(--border);\n           border-radius: 8px;\n           color: var(--text);\n           font-size: 14px;\n           cursor: pointer;\n           font-weight: 500;\n       }\n\n       #playerModal {\n           position: fixed;\n           top: 0;\n           left: 0;\n           width: 100%;\n           height: 100%;\n           background: rgba(0,0,0,0.98);\n           display: none;\n           align-items: center;\n           justify-content: center;\n           z-index: 20000;\n           padding: 20px;\n           opacity: 0;\n           transition: opacity 0.3s;\n       }\n\n       #playerModal.active {\n           display: flex;\n           opacity: 1;\n       }\n\n       #playerContent {\n           width: 100%;\n           max-width: 1200px;\n           aspect-ratio: 16/9;\n           background: #000;\n           border-radius: 12px;\n           overflow: hidden;\n           position: relative;\n           transform: scale(0.95);\n           transition: transform 0.3s;\n       }\n\n       #playerModal.active #playerContent {\n           transform: scale(1);\n       }\n\n       #playerIframe {\n           width: 100%;\n           height: 100%;\n           border: none;\n       }\n\n       .player-close-btn {\n           position: absolute;\n           top: -50px;\n           right: 0;\n           background: rgba(255,255,255,0.1);\n           border: 1px solid rgba(255,255,255,0.2);\n           color: var(--text);\n           padding: 10px 20px;\n           border-radius: 20px;\n           cursor: pointer;\n           font-size: 14px;\n           font-weight: 600;\n           transition: all 0.2s;\n       }\n\n       .player-close-btn:hover {\n           background: var(--primary);\n           color: #fff;\n       }\n\n       #searchResults {\n           display: none;\n           padding: 90px 4% 40px;\n           min-height: 50vh;\n           animation: fadeIn 0.4s ease;\n       }\n\n       #searchResults.active {\n           display: block;\n       }\n\n       .search-grid {\n           display: grid;\n           grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));\n           gap: 20px;\n       }\n\n       @media (min-width: 1200px) {\n           .search-grid {\n               grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n           }\n       }\n\n       #discoverMoreSection {\n           padding: 80px 4%;\n           margin-top: 60px;\n           border-top: 1px solid var(--border);\n           background: linear-gradient(to bottom, var(--bg), var(--surface));\n       }\n\n       .discover-header {\n           text-align: center;\n           margin-bottom: 50px;\n       }\n\n       .discover-title {\n           font-size: 42px;\n           font-weight: 900;\n           margin-bottom: 16px;\n           color: #fff;\n           text-transform: uppercase;\n           letter-spacing: -1px;\n       }\n\n       .discover-subtitle {\n           color: var(--text-secondary);\n           font-size: 18px;\n           max-width: 600px;\n           margin: 0 auto;\n           line-height: 1.6;\n       }\n\n       .discover-stats {\n           display: flex;\n           justify-content: center;\n           gap: 60px;\n           margin-top: 32px;\n           flex-wrap: wrap;\n       }\n\n       .stat-item {\n           text-align: center;\n       }\n\n       .stat-number {\n           font-size: 36px;\n           font-weight: 900;\n           color: var(--primary);\n           display: block;\n           margin-bottom: 4px;\n       }\n\n       .stat-label {\n           font-size: 12px;\n           color: var(--text-muted);\n           text-transform: uppercase;\n           letter-spacing: 2px;\n           font-weight: 700;\n       }\n\n       .discover-grid {\n           display: grid;\n           grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n           gap: 20px;\n           margin-bottom: 50px;\n       }\n\n       @media (min-width: 768px) {\n           .discover-grid {\n               grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));\n           }\n       }\n\n       @media (min-width: 1200px) {\n           .discover-grid {\n               grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n           }\n       }\n\n       @media (min-width: 1600px) {\n           .discover-grid {\n               grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n           }\n       }\n\n       .load-more-container {\n           text-align: center;\n           padding: 40px 0;\n       }\n\n       .load-more-btn {\n           background: transparent;\n           color: var(--text);\n           border: 2px solid var(--text-secondary);\n           padding: 16px 48px;\n           border-radius: 30px;\n           font-size: 14px;\n           font-weight: 700;\n           cursor: pointer;\n           transition: all 0.3s ease;\n           display: inline-flex;\n           align-items: center;\n           gap: 12px;\n           text-transform: uppercase;\n           letter-spacing: 1px;\n       }\n\n       .load-more-btn:hover {\n           background: var(--primary);\n           border-color: var(--primary);\n           color: #fff;\n           transform: translateY(-2px);\n           box-shadow: 0 10px 30px rgba(229, 9, 20, 0.3);\n       }\n\n       .load-more-btn:disabled {\n           opacity: 0.5;\n           cursor: not-allowed;\n           transform: none;\n           background: transparent;\n           color: var(--text-muted);\n           border-color: var(--text-muted);\n       }\n\n       .load-more-btn.loading {\n           pointer-events: none;\n       }\n\n       .load-more-btn.loading::after {\n           content: '';\n           width: 20px;\n           height: 20px;\n           border: 2px solid rgba(255,255,255,0.3);\n           border-top-color: #fff;\n           border-radius: 50%;\n           animation: spin 0.8s linear infinite;\n       }\n\n       .toast {\n           position: fixed;\n           bottom: 30px;\n           left: 50%;\n           transform: translateX(-50%) translateY(100px);\n           background: var(--surface-light);\n           color: var(--text);\n           padding: 16px 28px;\n           border-radius: 8px;\n           border: 1px solid var(--border);\n           z-index: 30000;\n           opacity: 0;\n           transition: all 0.3s;\n           font-weight: 600;\n           box-shadow: 0 10px 40px rgba(0,0,0,0.5);\n       }\n\n       .toast.show {\n           opacity: 1;\n           transform: translateX(-50%) translateY(0);\n       }\n\n       .loading-container {\n           display: flex;\n           justify-content: center;\n           padding: 60px;\n       }\n\n       .spinner {\n           width: 40px;\n           height: 40px;\n           border: 3px solid rgba(255,255,255,0.1);\n           border-top-color: var(--primary);\n           border-radius: 50%;\n           animation: spin 0.8s linear infinite;\n       }\n\n       .empty-state {\n           color: var(--text-muted);\n           padding: 60px 40px;\n           text-align: center;\n           font-size: 16px;\n           width: 100%;\n       }\n\n       @media (max-width: 768px) {\n           .search-container {\n               flex-direction: column;\n           }\n           \n           .search-btn {\n               width: 100%;\n               justify-content: center;\n               padding: 14px;\n           }\n           \n           .hero-title { font-size: 40px; }\n           .hero-section { min-height: 70vh; padding-top: 100px; }\n           .mobile-menu-btn { display: flex; }\n           .nav-links { display: none; }\n           \n           .card { width: 120px; height: 180px; }\n           .card-medium { width: 140px; height: 210px; }\n           .card-large { width: 200px; height: 300px; }\n           .card-xl { width: 260px; height: 390px; }\n           .card-wide { width: 120px; height: 180px; }\n           \n           #detailsModal {\n               padding: 0;\n               align-items: flex-end;\n           }\n           \n           #detailsContent {\n               border-radius: 20px 20px 0 0;\n               max-height: 90vh;\n               overflow-y: auto;\n           }\n           \n           .modal-close-btn {\n               top: 10px;\n               right: 10px;\n           }\n           \n           .details-actions {\n               flex-direction: column;\n           }\n           \n           .btn-primary, .btn-secondary, .btn-download {\n               width: 100%;\n               justify-content: center;\n           }\n\n           .server-selector {\n               margin-left: 10px;\n               padding-left: 10px;\n           }\n           \n           .server-label {\n               display: none;\n           }\n           \n           .server-select {\n               min-width: 100px;\n               font-size: 12px;\n           }\n\n           .loading-logo {\n               font-size: 40px;\n           }\n\n           .tips-text {\n               font-size: 14px;\n               padding: 0 20px;\n           }\n\n           .discover-title {\n               font-size: 32px;\n           }\n\n           .discover-stats {\n               gap: 30px;\n           }\n\n           .stat-number {\n               font-size: 28px;\n           }\n\n           .featured-card {\n               width: 100px;\n               height: 150px;\n           }\n\n           .featured-grid {\n               gap: 12px;\n           }\n\n           .featured-info {\n               display: none;\n           }\n\n           .loading-content {\n               margin: 20px;\n               padding: 30px 20px;\n           }\n       }\n   </style>\n</head>\n<body>\n   <!-- FIXED: Loading Screen with Anime Background -->\n   <div id=\"loadingScreen\">\n       <!-- Anime Cyberpunk Background Layers -->\n       <div class=\"anime-bg-container\">\n           <div class=\"anime-bg-layer\"></div>\n           <div class=\"anime-gradient-overlay\"></div>\n           <div class=\"neon-grid\"></div>\n           <div class=\"scanlines\"></div>\n           <div class=\"particles-container\" id=\"particlesContainer\"></div>\n           <div class=\"vignette\"></div>\n       </div>\n\n       <div class=\"loading-content\">\n           <div class=\"loading-logo\">GN-STREAM</div>\n           \n           <!-- Featured Top Picks Section -->\n           <div class=\"featured-section\">\n               <div class=\"featured-label\"> Top Picks For You</div>\n               <div class=\"featured-grid\">\n                   <!-- Featured Card 1: Squid Game -->\n                   <div class=\"featured-card\" onclick=\"event.stopPropagation(); showToast('Squid Game S2 coming soon!', 'info')\">\n                       <div class=\"featured-badge\">Trending #1</div>\n                       <img src=\"https://kimi-web-img.moonshot.cn/img/static1.srcdn.com/a5ff13ae8e2b9d9ca2d9c27ce48a92593d836a80.jpg\" alt=\"Squid Game\">\n                       <div class=\"featured-info\">\n                           <div class=\"featured-title\">Squid Game</div>\n                           <div class=\"featured-meta\"> 4.9  Thriller  2024</div>\n                       </div>\n                   </div>\n\n                   <!-- Featured Card 2: Dune Part Two -->\n                   <div class=\"featured-card\" onclick=\"event.stopPropagation(); showToast('Dune: Part Two available now!', 'success')\">\n                       <div class=\"featured-badge\">New Release</div>\n                       <img src=\"https://kimi-web-img.moonshot.cn/img/upload.wikimedia.org/c051930bc69f134c981b7f47701a56d786faa4da.jpeg\" alt=\"Dune Part Two\">\n                       <div class=\"featured-info\">\n                           <div class=\"featured-title\">Dune: Part Two</div>\n                           <div class=\"featured-meta\"> 4.8  Sci-Fi  2024</div>\n                       </div>\n                   </div>\n\n                   <!-- Featured Card 3: The Witcher -->\n                   <div class=\"featured-card\" onclick=\"event.stopPropagation(); showToast('The Witcher S4 in production', 'info')\">\n                       <div class=\"featured-badge\">Fan Favorite</div>\n                       <img src=\"https://kimi-web-img.moonshot.cn/img/i.ebayimg.com/266685e89b8e1baf9ad7c655b1ec127dd738628e.JPG\" alt=\"The Witcher\">\n                       <div class=\"featured-info\">\n                           <div class=\"featured-title\">The Witcher</div>\n                           <div class=\"featured-meta\"> 4.7  Fantasy  Series</div>\n                       </div>\n                   </div>\n               </div>\n           </div>\n\n           <div class=\"loading-spinner\"></div>\n           <div class=\"loading-bar\">\n               <div class=\"loading-progress\"></div>\n           </div>\n           <div class=\"tips-container\">\n               <div class=\"tips-label\"> Pro Tip</div>\n               <div class=\"tips-text\" id=\"tipsText\">Loading amazing content...</div>\n           </div>\n           <div class=\"loading-stats\">\n               Initializing <span id=\"serverCount\">28</span> streaming servers\n           </div>\n       </div>\n   </div>\n\n   <div class=\"bg-animation\"></div>\n   <div class=\"noise\"></div>\n\n   <div class=\"toast\" id=\"toast\"></div>\n\n   <header id=\"mainHeader\">\n       <div class=\"logo\" onclick=\"showHome()\">GN-STREAM</div>\n       <nav class=\"nav-links\">\n           <a onclick=\"showHome()\" class=\"active\" id=\"nav-home\">Home</a>\n           <a onclick=\"showNowPlaying()\" id=\"nav-nowplaying\">Now Playing</a>\n           <a onclick=\"showContinueWatching()\" id=\"nav-continue\">Continue</a>\n           <a onclick=\"showMyList()\" id=\"nav-mylist\">My List <span id=\"myListCount\" class=\"my-list-badge\" style=\"display:none\">0</span></a>\n           <a onclick=\"scrollToSection('movies')\" id=\"nav-movies\">Movies</a>\n           <a onclick=\"scrollToSection('tv')\" id=\"nav-tv\">TV Shows</a>\n           \n           <div class=\"server-selector\">\n               <span class=\"server-label\">Server</span>\n               <select id=\"serverSelect\" class=\"server-select\" onchange=\"changeServer(this.value)\">\n                   <option value=\"1\">AutoEmbed Test</option>\n                   <option value=\"2\">AutoEmbed Player</option>\n                   <option value=\"3\">VidSrc.cc</option>\n                   <option value=\"4\">VidSrc.to</option>\n                   <option value=\"5\">2Embed</option>\n                   <option value=\"6\">MultiEmbed</option>\n                   <option value=\"7\">Embed.su</option>\n                   <option value=\"8\">VidSrc.xyz</option>\n                   <option value=\"9\">VidSrc.me</option>\n                   <option value=\"10\">VidSrc.in</option>\n                   <option value=\"11\">SuperEmbed</option>\n                   <option value=\"12\">MovieEmbed</option>\n                   <option value=\"13\">StreamEmbed</option>\n                   <option value=\"14\">PrimeWire</option>\n                   <option value=\"15\">123Embed</option>\n                   <option value=\"16\">GoMovies</option>\n                   <option value=\"17\">Fmovies</option>\n                   <option value=\"18\">YesMovies</option>\n                   <option value=\"19\">SolarMovie</option>\n                   <option value=\"20\">PutLocker</option>\n                   <option value=\"21\">WatchSeries</option>\n                   <option value=\"22\">CouchTuner</option>\n                   <option value=\"23\">ProjectFreeTV</option>\n                   <option value=\"24\">StreamLord</option>\n                   <option value=\"25\">Time4TV</option>\n                   <option value=\"26\">USTVGO</option>\n                   <option value=\"27\">TVPlayer</option>\n                   <option value=\"28\">FreeInterTV</option>\n               </select>\n           </div>\n       </nav>\n       <button class=\"mobile-menu-btn\" onclick=\"toggleMobileMenu()\"></button>\n   </header>\n\n   <div class=\"mobile-nav\" id=\"mobileNav\">\n       <a onclick=\"showHome(); toggleMobileMenu();\"> Home</a>\n       <a onclick=\"showNowPlaying(); toggleMobileMenu();\"> Now Playing</a>\n       <a onclick=\"showContinueWatching(); toggleMobileMenu();\"> Continue</a>\n       <a onclick=\"showMyList(); toggleMobileMenu();\"> My List</a>\n       <a onclick=\"scrollToSection('movies'); toggleMobileMenu();\"> Movies</a>\n       <a onclick=\"scrollToSection('tv'); toggleMobileMenu();\"> TV Shows</a>\n       <div style=\"padding: 16px; border-top: 1px solid var(--border); margin-top: 8px;\">\n           <span style=\"color: var(--text-muted); font-size: 12px; text-transform: uppercase; font-weight: 600; margin-right: 10px;\">Server</span>\n           <select id=\"mobileServerSelect\" class=\"server-select\" onchange=\"changeServer(this.value)\" style=\"width: calc(100% - 60px);\">\n               <option value=\"1\">AutoEmbed Test</option>\n               <option value=\"2\">AutoEmbed Player</option>\n               <option value=\"3\">VidSrc.cc</option>\n               <option value=\"4\">VidSrc.to</option>\n               <option value=\"5\">2Embed</option>\n               <option value=\"6\">MultiEmbed</option>\n               <option value=\"7\">Embed.su</option>\n               <option value=\"8\">VidSrc.xyz</option>\n               <option value=\"9\">VidSrc.me</option>\n               <option value=\"10\">VidSrc.in</option>\n               <option value=\"11\">SuperEmbed</option>\n               <option value=\"12\">MovieEmbed</option>\n               <option value=\"13\">StreamEmbed</option>\n               <option value=\"14\">PrimeWire</option>\n               <option value=\"15\">123Embed</option>\n               <option value=\"16\">GoMovies</option>\n               <option value=\"17\">Fmovies</option>\n               <option value=\"18\">YesMovies</option>\n               <option value=\"19\">SolarMovie</option>\n               <option value=\"20\">PutLocker</option>\n               <option value=\"21\">WatchSeries</option>\n           </select>\n       </div>\n   </div>\n\n   <div class=\"hero-section\" id=\"homeHero\">\n       <div class=\"hero-content\">\n           <div class=\"hero-title\">Unlimited Entertainment</div>\n           <div class=\"hero-subtitle\">Discover thousands of movies and TV shows in stunning quality. Stream anytime, anywhere.</div>\n           \n           <div class=\"search-container\">\n               <div class=\"search-wrapper\">\n                   <div class=\"search-box\">\n                       <span class=\"search-icon\"></span>\n                       <input id=\"searchInput\" placeholder=\"Search movies, shows...\" autocomplete=\"off\" />\n                       <button class=\"search-clear\" id=\"searchClear\" onclick=\"clearSearchInput()\"></button>\n                   </div>\n               </div>\n               \n               <button class=\"search-btn\" onclick=\"executeSearch()\">\n                   Search\n               </button>\n               \n               <div class=\"filter-wrapper\">\n                   <select id=\"ratingSelect\">\n                       <option value=\"all\">All Ratings</option>\n                       <option value=\"gpg\">G / PG</option>\n                       <option value=\"pg13\">PG-13</option>\n                       <option value=\"r\">R</option>\n                       <option value=\"nc17\">NC-17</option>\n                   </select>\n                   <span class=\"filter-arrow\"></span>\n               </div>\n           </div>\n       </div>\n   </div>\n\n   <div id=\"nowPlayingSection\">\n       <div class=\"category-header\">\n           <div class=\"category-title\"> Now Playing</div>\n       </div>\n       <div class=\"movie-row\" id=\"nowPlayingRow\"></div>\n   </div>\n\n   <div id=\"continueWatchingSection\">\n       <div class=\"category-header\">\n           <div class=\"category-title\"> Continue Watching</div>\n           <div class=\"view-all\" onclick=\"clearContinueWatching()\">Clear</div>\n       </div>\n       <div class=\"movie-row\" id=\"continueWatchingRow\"></div>\n   </div>\n\n   <div id=\"myListSection\">\n       <div class=\"category-header\">\n           <div class=\"category-title\"> My List</div>\n       </div>\n       <div class=\"movie-row\" id=\"myListRow\"></div>\n   </div>\n\n   <div id=\"categoriesContainer\">\n       <div class=\"category-section\" id=\"section-trending\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Trending Now</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"trendingRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-action\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Action</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"actionRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-comedy\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Comedy</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"comedyRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-horror\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Horror</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"horrorRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-scifi\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Sci-Fi</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"scifiRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-romance\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Romance</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"romanceRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-thriller\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Thriller</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"thrillerRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-drama\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Drama</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"dramaRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-animation\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Animation</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"animationRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-documentary\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Documentary</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"documentaryRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-crime\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Crime</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"crimeRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-mystery\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Mystery</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"mysteryRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-fantasy\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Fantasy</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"fantasyRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-family\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Family</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"familyRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-adventure\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Adventure</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"adventureRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-movies\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> Popular Movies</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"popularMoviesRow\"></div>\n           </div>\n       </div>\n\n       <div class=\"category-section\" id=\"section-tv\">\n           <div class=\"category-header\">\n               <div class=\"category-title\"> TV Shows</div>\n           </div>\n           <div class=\"row-container\">\n               <div class=\"movie-row\" id=\"popularTvRow\"></div>\n           </div>\n       </div>\n   </div>\n\n   <div id=\"discoverMoreSection\">\n       <div class=\"discover-header\">\n           <div class=\"discover-title\">Discover More</div>\n           <div class=\"discover-subtitle\">Explore our vast collection of over 2,200,000 movies and 800,000 shows that people are watching right now</div>\n           <div class=\"discover-stats\">\n               <div class=\"stat-item\">\n                   <span class=\"stat-number\" id=\"totalMovies\">2,200,000+</span>\n                   <span class=\"stat-label\">Titles</span>\n               </div>\n               <div class=\"stat-item\">\n                   <span class=\"stat-number\" id=\"totalGenres\">25+</span>\n                   <span class=\"stat-label\">Genres</span>\n               </div>\n               <div class=\"stat-item\">\n                   <span class=\"stat-number\" id=\"updatedDaily\">Daily</span>\n                   <span class=\"stat-label\">Updated</span>\n               </div>\n           </div>\n       </div>\n       <div class=\"discover-grid\" id=\"discoverGrid\"></div>\n       <div class=\"load-more-container\">\n           <button class=\"load-more-btn\" id=\"loadMoreBtn\" onclick=\"loadDiscoverMore()\">\n               Load More Titles\n           </button>\n       </div>\n   </div>\n\n   <div id=\"searchResults\">\n       <div class=\"category-header\">\n           <div class=\"category-title\"> Search Results</div>\n           <button class=\"btn-secondary\" onclick=\"clearSearch()\" style=\"padding: 8px 16px; font-size: 12px;\">Back</button>\n       </div>\n       <div class=\"search-grid\" id=\"searchResultsGrid\"></div>\n   </div>\n\n   <div id=\"detailsModal\" onclick=\"closeDetailsOnBackdrop(event)\">\n       <button class=\"modal-close-btn\" onclick=\"closeDetails()\"></button>\n       \n       <div id=\"detailsContent\" onclick=\"event.stopPropagation()\">\n           <div id=\"posterContainer\">\n               <img id=\"posterImage\" src=\"\" alt=\"Poster\">\n           </div>\n\n           <div class=\"details-info\">\n               <div class=\"details-title\" id=\"detailsTitle\"></div>\n               <div class=\"details-meta\">\n                   <span class=\"match-score\" id=\"matchScore\">98% Match</span>\n                   <span id=\"detailsYear\"></span>\n                   <span id=\"detailsRuntime\"></span>\n                   <span class=\"details-rating\" id=\"detailsRating\">NR</span>\n                   <span id=\"detailsGenre\"></span>\n               </div>\n               <div class=\"details-actions\">\n                   <button class=\"btn-primary\" onclick=\"playContent()\"> Play</button>\n                   <button class=\"btn-secondary\" id=\"detailsAddToList\" onclick=\"toggleListFromDetails()\">+ My List</button>\n                   <button class=\"btn-download\" onclick=\"downloadContent()\"> Download</button>\n               </div>\n               \n               <div id=\"episodeSelector\" class=\"episode-selector\" style=\"display: none;\">\n                   <div class=\"selector-row\">\n                       <span class=\"selector-label\">Season</span>\n                       <select id=\"seasonSelect\" class=\"selector-select\" onchange=\"onSeasonChange()\"></select>\n                   </div>\n                   <div class=\"selector-row\">\n                       <span class=\"selector-label\">Episode</span>\n                       <select id=\"episodeSelect\" class=\"selector-select\" onchange=\"onEpisodeChange()\"></select>\n                   </div>\n                   <div id=\"episodeInfo\" class=\"episode-info\"></div>\n               </div>\n           </div>\n\n           <div id=\"detailsBody\">\n               <div class=\"details-section\">\n                   <h3>About</h3>\n                   <p id=\"detailsOverview\"></p>\n               </div>\n               <div class=\"details-section\">\n                   <h3>Cast</h3>\n                   <div class=\"cast-list\" id=\"detailsCast\"></div>\n               </div>\n           </div>\n       </div>\n   </div>\n\n   <div id=\"playerModal\" onclick=\"closePlayerOnBackdrop(event)\">\n       <div id=\"playerContent\" onclick=\"event.stopPropagation()\">\n           <button class=\"player-close-btn\" onclick=\"closePlayer()\"> Close</button>\n           <iframe id=\"playerIframe\" allowfullscreen></iframe>\n       </div>\n   </div>\n\n   <script>\n       const API_KEY = '3a73619bbb8fc6d47742d1b5b2b707b5';\n       const baseURL = 'https://api.themoviedb.org/3';\n       const FALLBACK_POSTER = 'https://via.placeholder.com/300x450/141414/6b6b6b?text=No+Poster';\n       const FALLBACK_BACKDROP = 'https://via.placeholder.com/1280x720/141414/6b6b6b?text=No+Backdrop';\n\n       let myList = JSON.parse(localStorage.getItem('gnStreamMyList')) || [];\n       let continueWatching = JSON.parse(localStorage.getItem('gnStreamContinue')) || [];\n       let currentDetailsItem = null;\n       let tvSeasonsData = [];\n       let scrollPosition = 0;\n       let currentServer = localStorage.getItem('gnStreamServer') || '1';\n       let discoverPage = 1;\n       let discoverTotalLoaded = 0;\n       const DISCOVER_TOTAL_TARGET = 600;\n       let isLoadingDiscover = false;\n\n       const apiCache = new Map();\n       const CACHE_DURATION = 5 * 60 * 1000;\n\n       const tips = [\n           \"Press ESC to close the video player quickly\",\n           \"Add movies to My List to watch them later\",\n           \"Use the server selector if a stream isn't loading\",\n           \"Continue Watching shows your progress automatically\",\n           \"Click on any poster to see details and cast info\",\n           \"Use the rating filter to find age-appropriate content\",\n           \"Search works for both movies and TV shows\",\n           \"Your watch history is saved locally in your browser\",\n           \"Try different servers for better streaming quality\",\n           \"Click the + button on any card to add to your list\",\n           \"TV shows display season and episode selectors\",\n           \"Download button opens the video in a new tab\",\n           \"Use arrow keys to navigate through movie rows\",\n           \"The match score shows how much you might like it\",\n           \"Click the logo to return to the home page anytime\"\n       ];\n\n       const GENRES = {\n           ACTION: 28,\n           COMEDY: 35,\n           HORROR: 27,\n           SCIFI: 878,\n           ROMANCE: 10749,\n           THRILLER: 53,\n           DRAMA: 18,\n           ANIMATION: 16,\n           DOCUMENTARY: 99,\n           CRIME: 80,\n           MYSTERY: 9648,\n           FANTASY: 14,\n           FAMILY: 10751,\n           ADVENTURE: 12\n       };\n\n       const GENRE_BADGES = {\n           [GENRES.ACTION]: 'badge-action',\n           [GENRES.COMEDY]: 'badge-fan-favorite',\n           [GENRES.HORROR]: 'badge-horror',\n           [GENRES.SCIFI]: 'badge-scifi',\n           [GENRES.ROMANCE]: 'badge-romance',\n           [GENRES.THRILLER]: 'badge-thriller',\n           [GENRES.DRAMA]: 'badge-drama',\n           [GENRES.ANIMATION]: 'badge-animation',\n           [GENRES.DOCUMENTARY]: 'badge-documentary',\n           [GENRES.CRIME]: 'badge-crime',\n           [GENRES.MYSTERY]: 'badge-mystery',\n           [GENRES.FANTASY]: 'badge-fantasy',\n           [GENRES.FAMILY]: 'badge-family',\n           [GENRES.ADVENTURE]: 'badge-adventure'\n       };\n\n       const CARD_SIZES = {\n           TRENDING: 'card-large',\n           ACTION: 'card',\n           COMEDY: 'card',\n           HORROR: 'card',\n           SCIFI: 'card',\n           ROMANCE: 'card',\n           THRILLER: 'card',\n           DRAMA: 'card',\n           ANIMATION: 'card',\n           DOCUMENTARY: 'card',\n           CRIME: 'card',\n           MYSTERY: 'card',\n           FANTASY: 'card',\n           FAMILY: 'card',\n           ADVENTURE: 'card',\n           MOVIES: 'card',\n           TV: 'card',\n           DEFAULT: 'card'\n       };\n\n       const SERVERS = {\n           '1': {\n               name: 'AutoEmbed Test',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://test.autoembed.cc/embed/tv/${id}/${season}/${episode}?autoplay=true`;\n                   }\n                   return `https://test.autoembed.cc/embed/movie/${id}?autoplay=true`;\n               }\n           },\n           '2': {\n               name: 'AutoEmbed Player',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://player.autoembed.cc/embed/tv/${id}/${season}/${episode}`;\n                   }\n                   return `https://player.autoembed.cc/embed/movie/${id}`;\n               }\n           },\n           '3': {\n               name: 'VidSrc.cc',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://vidsrc.cc/v2/embed/tv/${id}/${season}/${episode}?poster=true&autoPlay=true`;\n                   }\n                   return `https://vidsrc.cc/v2/embed/movie/${id}?poster=true&autoPlay=true`;\n               }\n           },\n           '4': {\n               name: 'VidSrc.to',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://vidsrc.to/embed/tv/${id}/${season}/${episode}`;\n                   }\n                   return `https://vidsrc.to/embed/movie/${id}`;\n               }\n           },\n           '5': {\n               name: '2Embed',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://www.2embed.cc/embedtv/${id}&s=${season}&e=${episode}`;\n                   }\n                   return `https://www.2embed.cc/embed/${id}`;\n               }\n           },\n           '6': {\n               name: 'MultiEmbed',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://multiembed.mov/?video_id=${id}&tmdb=1&s=${season}&e=${episode}`;\n                   }\n                   return `https://multiembed.mov/?video_id=${id}&tmdb=1`;\n               }\n           },\n           '7': {\n               name: 'Embed.su',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://embed.su/embed/tv/${id}/${season}/${episode}`;\n                   }\n                   return `https://embed.su/embed/movie/${id}`;\n               }\n           },\n           '8': {\n               name: 'VidSrc.xyz',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://vidsrc.xyz/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://vidsrc.xyz/embed/movie?tmdb=${id}`;\n               }\n           },\n           '9': {\n               name: 'VidSrc.me',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://vidsrc.me/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://vidsrc.me/embed/movie?tmdb=${id}`;\n               }\n           },\n           '10': {\n               name: 'VidSrc.in',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://vidsrc.in/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://vidsrc.in/embed/movie?tmdb=${id}`;\n               }\n           },\n           '11': {\n               name: 'SuperEmbed',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://multiembed.mov/directstream.php?video_id=${id}&tmdb=1&s=${season}&e=${episode}`;\n                   }\n                   return `https://multiembed.mov/directstream.php?video_id=${id}&tmdb=1`;\n               }\n           },\n           '12': {\n               name: 'MovieEmbed',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://www.2embed.ru/embed/tv/tmdb/${id}?s=${season}&e=${episode}`;\n                   }\n                   return `https://www.2embed.ru/embed/movie/tmdb/${id}`;\n               }\n           },\n           '13': {\n               name: 'StreamEmbed',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://2embed.org/embed/tv/tmdb/${id}?s=${season}&e=${episode}`;\n                   }\n                   return `https://2embed.org/embed/movie/tmdb/${id}`;\n               }\n           },\n           '14': {\n               name: 'PrimeWire',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://www.primewire.tf/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://www.primewire.tf/embed/movie?tmdb=${id}`;\n               }\n           },\n           '15': {\n               name: '123Embed',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://www.123embed.net/embed/tv/${id}/${season}/${episode}`;\n                   }\n                   return `https://www.123embed.net/embed/movie/${id}`;\n               }\n           },\n           '16': {\n               name: 'GoMovies',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://gostream.site/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://gostream.site/embed/movie?tmdb=${id}`;\n               }\n           },\n           '17': {\n               name: 'Fmovies',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://fmovies.to/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://fmovies.to/embed/movie?tmdb=${id}`;\n               }\n           },\n           '18': {\n               name: 'YesMovies',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://yesmovies.ag/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://yesmovies.ag/embed/movie?tmdb=${id}`;\n               }\n           },\n           '19': {\n               name: 'SolarMovie',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://solarmovie.pe/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://solarmovie.pe/embed/movie?tmdb=${id}`;\n               }\n           },\n           '20': {\n               name: 'PutLocker',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://putlocker.vip/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://putlocker.vip/embed/movie?tmdb=${id}`;\n               }\n           },\n           '21': {\n               name: 'WatchSeries',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://watchserieshd.tv/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://watchserieshd.tv/embed/movie?tmdb=${id}`;\n               }\n           },\n           '22': {\n               name: 'CouchTuner',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://couchtuner.show/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://couchtuner.show/embed/movie?tmdb=${id}`;\n               }\n           },\n           '23': {\n               name: 'ProjectFreeTV',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://projectfreetv.one/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://projectfreetv.one/embed/movie?tmdb=${id}`;\n               }\n           },\n           '24': {\n               name: 'StreamLord',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://streamlord.com/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://streamlord.com/embed/movie?tmdb=${id}`;\n               }\n           },\n           '25': {\n               name: 'Time4TV',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://time4tv.stream/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://time4tv.stream/embed/movie?tmdb=${id}`;\n               }\n           },\n           '26': {\n               name: 'USTVGO',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://ustvgo.tv/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://ustvgo.tv/embed/movie?tmdb=${id}`;\n               }\n           },\n           '27': {\n               name: 'TVPlayer',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://tvplayer.io/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://tvplayer.io/embed/movie?tmdb=${id}`;\n               }\n           },\n           '28': {\n               name: 'FreeInterTV',\n               buildUrl: (id, isTv, season, episode) => {\n                   if (isTv) {\n                       return `https://freeintertv.com/embed/tv?tmdb=${id}&season=${season}&episode=${episode}`;\n                   }\n                   return `https://freeintertv.com/embed/movie?tmdb=${id}`;\n               }\n           }\n       };\n\n       const searchInput = document.getElementById('searchInput');\n       const searchClear = document.getElementById('searchClear');\n       const ratingSelect = document.getElementById('ratingSelect');\n       const toast = document.getElementById('toast');\n       const detailsModal = document.getElementById('detailsModal');\n       const playerModal = document.getElementById('playerModal');\n       const serverSelect = document.getElementById('serverSelect');\n       const mobileServerSelect = document.getElementById('mobileServerSelect');\n       const loadingScreen = document.getElementById('loadingScreen');\n       const tipsText = document.getElementById('tipsText');\n\n       serverSelect.value = currentServer;\n       mobileServerSelect.value = currentServer;\n\n       // Create floating particles\n       function createParticles() {\n           const container = document.getElementById('particlesContainer');\n           for (let i = 0; i < 50; i++) {\n               const particle = document.createElement('div');\n               particle.className = 'particle';\n               particle.style.left = Math.random() * 100 + '%';\n               particle.style.animationDelay = Math.random() * 15 + 's';\n               particle.style.animationDuration = (Math.random() * 10 + 10) + 's';\n               container.appendChild(particle);\n           }\n       }\n\n       // Initialize particles\n       createParticles();\n\n       let currentTipIndex = 0;\n       function rotateTips() {\n           tipsText.style.opacity = '0';\n           setTimeout(() => {\n               currentTipIndex = (currentTipIndex + 1) % tips.length;\n               tipsText.textContent = tips[currentTipIndex];\n               tipsText.style.opacity = '1';\n           }, 500);\n       }\n\n       setInterval(rotateTips, 4000);\n\n       // FIXED: Proper loading screen hide after 4 seconds\n       setTimeout(() => {\n           loadingScreen.classList.add('hidden');\n           // Remove from DOM after transition\n           setTimeout(() => {\n               loadingScreen.style.display = 'none';\n           }, 800);\n       }, 4000);\n\n       function changeServer(serverValue) {\n           currentServer = serverValue;\n           localStorage.setItem('gnStreamServer', currentServer);\n           \n           serverSelect.value = currentServer;\n           mobileServerSelect.value = currentServer;\n           \n           const serverName = SERVERS[currentServer]?.name || `Server ${currentServer}`;\n           showToast(`Switched to ${serverName}`, 'success');\n       }\n\n       function showToast(message, type = 'info') {\n           toast.textContent = message;\n           toast.className = `toast ${type}`;\n           toast.classList.add('show');\n           setTimeout(() => toast.classList.remove('show'), 3000);\n       }\n\n       function toggleMobileMenu() {\n           document.getElementById('mobileNav').classList.toggle('active');\n       }\n\n       window.addEventListener('scroll', () => {\n           const header = document.getElementById('mainHeader');\n           header.classList.toggle('scrolled', window.scrollY > 50);\n       });\n\n       searchInput.addEventListener('input', () => {\n           searchClear.classList.toggle('visible', searchInput.value.length > 0);\n       });\n\n       searchInput.addEventListener('keydown', (e) => {\n           if (e.key === 'Enter') {\n               executeSearch();\n           }\n       });\n\n       function clearSearchInput() {\n           searchInput.value = '';\n           searchInput.focus();\n           searchClear.classList.remove('visible');\n       }\n\n       function executeSearch() {\n           const query = searchInput.value.trim();\n           if (!query) return;\n           performSearch(query);\n       }\n\n       async function fetchWithCache(url) {\n           const cached = apiCache.get(url);\n           if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {\n               return cached.data;\n           }\n           try {\n               const res = await fetch(url);\n               const data = await res.json();\n               apiCache.set(url, { data, timestamp: Date.now() });\n               return data;\n           } catch (e) {\n               console.error('Fetch error:', e);\n               return null;\n           }\n       }\n\n       function setActiveNav(id) {\n           document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));\n           document.getElementById(id)?.classList.add('active');\n       }\n\n       function hideAllSections() {\n           ['nowPlayingSection', 'continueWatchingSection', 'myListSection', 'categoriesContainer', 'searchResults', 'discoverMoreSection'].forEach(id => {\n               const el = document.getElementById(id);\n               if (el) el.style.display = 'none';\n           });\n       }\n\n       function showHome() {\n           hideAllSections();\n           document.getElementById('categoriesContainer').style.display = 'block';\n           document.getElementById('discoverMoreSection').style.display = 'block';\n           document.getElementById('homeHero').style.display = 'flex';\n           setActiveNav('nav-home');\n           searchInput.value = '';\n           searchClear.classList.remove('visible');\n           \n           if (continueWatching.length > 0) {\n               document.getElementById('continueWatchingSection').style.display = 'block';\n               renderContinueWatching();\n           }\n       }\n\n       function showNowPlaying() {\n           hideAllSections();\n           document.getElementById('nowPlayingSection').style.display = 'block';\n           setActiveNav('nav-nowplaying');\n           renderNowPlaying();\n       }\n\n       function showContinueWatching() {\n           hideAllSections();\n           document.getElementById('continueWatchingSection').style.display = 'block';\n           setActiveNav('nav-continue');\n           renderContinueWatching();\n       }\n\n       function showMyList() {\n           hideAllSections();\n           document.getElementById('myListSection').style.display = 'block';\n           setActiveNav('nav-mylist');\n           renderMyList();\n       }\n\n       function scrollToSection(section) {\n           showHome();\n           setTimeout(() => {\n               document.getElementById(`section-${section}`)?.scrollIntoView({ behavior: 'smooth' });\n           }, 100);\n       }\n\n       function clearSearch() {\n           showHome();\n       }\n\n       async function getCertification(item) {\n           try {\n               const endpoint = item.media_type === 'tv' || item.first_air_date ? 'tv' : 'movie';\n               const url = endpoint === 'tv' \n                   ? `${baseURL}/tv/${item.id}/content_ratings?api_key=${API_KEY}`\n                   : `${baseURL}/movie/${item.id}/release_dates?api_key=${API_KEY}`;\n               const data = await fetchWithCache(url);\n               if (endpoint === 'tv') {\n                   return data?.results?.find(r => r.iso_3166_1 === 'US')?.rating || 'NR';\n               }\n               return data?.results?.find(r => r.iso_3166_1 === 'US')?.release_dates?.[0]?.certification || 'NR';\n           } catch (e) {\n               return 'NR';\n           }\n       }\n\n       function certMatchesGroup(cert, group) {\n           if (group === 'all') return true;\n           cert = (cert || '').toUpperCase();\n           if (group === 'gpg') return ['G','PG','TV-Y','TV-G','TV-Y7'].includes(cert);\n           if (group === 'pg13') return cert === 'PG-13' || cert === 'TV-14';\n           if (group === 'r') return cert === 'R' || cert === 'TV-MA';\n           if (group === 'nc17') return cert === 'NC-17';\n           return false;\n       }\n\n       function getGenreBadge(genreIds) {\n           if (!genreIds || genreIds.length === 0) return '';\n           \n           for (const genreId of genreIds) {\n               if (GENRE_BADGES[genreId]) {\n                   const genreName = Object.keys(GENRES).find(key => GENRES[key] === genreId) || 'Genre';\n                   return `<div class=\"bookmark-badge ${GENRE_BADGES[genreId]}\">${genreName}</div>`;\n               }\n           }\n           return '';\n       }\n\n       function createCard(item, container, index = 0, cardSizeClass = 'card') {\n           const cert = item._cert || 'NR';\n           const card = document.createElement('div');\n           card.className = `card ${cardSizeClass}`;\n           card.dataset.id = item.id;\n           \n           const inList = myList.some(i => i.id === item.id);\n           \n           const imageUrl = item.poster_path \n               ? `https://image.tmdb.org/t/p/w342${item.poster_path}`\n               : FALLBACK_POSTER;\n           \n           const badge = getGenreBadge(item.genre_ids);\n           \n           card.innerHTML = `\n               ${badge}\n               <img src=\"${imageUrl}\" alt=\"${item.title || item.name}\" loading=\"lazy\" onerror=\"this.src='${FALLBACK_POSTER}'\">\n               <div class=\"card-overlay\">\n                   <div class=\"card-title\">${item.title || item.name}</div>\n                   <div class=\"card-rating\"> ${(item.vote_average || 0).toFixed(1)}  ${cert}</div>\n               </div>\n               <button class=\"add-to-list-btn ${inList ? 'in-list' : ''}\" data-item-id=\"${item.id}\">\n                   ${inList ? '' : '+'}\n               </button>\n           `;\n           \n           card.addEventListener('click', (e) => {\n               if (e.target.closest('.add-to-list-btn')) {\n                   e.stopPropagation();\n                   toggleMyList(item);\n               } else {\n                   openDetails(item);\n               }\n           });\n           \n           container.appendChild(card);\n       }\n\n       function toggleMyList(item) {\n           const index = myList.findIndex(i => i.id === item.id);\n           const isAdding = index === -1;\n           \n           if (isAdding) {\n               myList.push(item);\n               showToast('Added to My List', 'success');\n           } else {\n               myList.splice(index, 1);\n               showToast('Removed from My List', 'info');\n           }\n           \n           localStorage.setItem('gnStreamMyList', JSON.stringify(myList));\n           updateMyListCount();\n           \n           updateAllListButtonStates(item.id, isAdding);\n           \n           if (document.getElementById('myListSection').style.display === 'block') {\n               renderMyList();\n           }\n           \n           if (currentDetailsItem && currentDetailsItem.id === item.id) {\n               updateDetailsListButton();\n           }\n       }\n\n       function updateAllListButtonStates(itemId, isInList) {\n           document.querySelectorAll(`.add-to-list-btn[data-item-id=\"${itemId}\"]`).forEach(btn => {\n               btn.classList.toggle('in-list', isInList);\n               btn.innerHTML = isInList ? '' : '+';\n           });\n       }\n\n       function updateDetailsListButton() {\n           const listBtn = document.getElementById('detailsAddToList');\n           if (!listBtn || !currentDetailsItem) return;\n           \n           const inList = myList.some(i => i.id === currentDetailsItem.id);\n           listBtn.innerHTML = inList ? ' In My List' : '+ My List';\n           listBtn.classList.toggle('btn-red', inList);\n       }\n\n       function toggleListFromDetails() {\n           if (!currentDetailsItem) return;\n           toggleMyList(currentDetailsItem);\n       }\n\n       function updateMyListCount() {\n           const count = myList.length;\n           const badge = document.getElementById('myListCount');\n           if (count > 0) {\n               badge.textContent = count > 99 ? '99+' : count;\n               badge.style.display = 'inline';\n           } else {\n               badge.style.display = 'none';\n           }\n       }\n\n       function renderContinueWatching() {\n           const container = document.getElementById('continueWatchingRow');\n           container.innerHTML = '';\n           if (continueWatching.length === 0) {\n               container.innerHTML = '<div class=\"empty-state\">No movies in progress</div>';\n               return;\n           }\n           continueWatching.forEach(item => {\n               const card = document.createElement('div');\n               card.className = 'card card-medium';\n               const progress = Math.min(100, Math.round((item.progress / item.duration) * 100));\n               \n               const imageUrl = item.poster_path \n                   ? `https://image.tmdb.org/t/p/w342${item.poster_path}`\n                   : FALLBACK_POSTER;\n               \n               card.innerHTML = `\n                   <div class=\"bookmark-badge badge-binge\">Resume</div>\n                   <img src=\"${imageUrl}\" alt=\"${item.title || item.name}\" onerror=\"this.src='${FALLBACK_POSTER}'\">\n                   <div class=\"progress-bar\"><div class=\"progress-fill\" style=\"width: ${progress}%\"></div></div>\n                   <div class=\"card-overlay\">\n                       <div class=\"card-title\">${item.title || item.name}</div>\n                   </div>\n               `;\n               card.onclick = () => openDetails(item);\n               container.appendChild(card);\n           });\n       }\n\n       async function renderNowPlaying() {\n           const container = document.getElementById('nowPlayingRow');\n           container.innerHTML = '<div class=\"loading-container\"><div class=\"spinner\"></div></div>';\n           \n           const data = await fetchWithCache(`${baseURL}/movie/now_playing?api_key=${API_KEY}&language=en-US&page=1`);\n           container.innerHTML = '';\n           \n           if (!data?.results) {\n               container.innerHTML = '<div class=\"empty-state\">Failed to load movies</div>';\n               return;\n           }\n           \n           for (const item of data.results.slice(0, 20)) {\n               item.media_type = 'movie';\n               item._cert = await getCertification(item);\n               createCard(item, container, 0, 'card-large');\n           }\n       }\n\n       function renderMyList() {\n           const container = document.getElementById('myListRow');\n           container.innerHTML = '';\n           if (myList.length === 0) {\n               container.innerHTML = '<div class=\"empty-state\">Your list is empty. Add movies by clicking the + button on any poster.</div>';\n               return;\n           }\n           myList.forEach(item => createCard(item, container, 0, 'card'));\n       }\n\n       function clearContinueWatching() {\n           if (confirm('Clear history?')) {\n               continueWatching = [];\n               localStorage.setItem('gnStreamContinue', '[]');\n               renderContinueWatching();\n               showToast('History cleared', 'success');\n           }\n       }\n\n       async function performSearch(query) {\n           hideAllSections();\n           document.getElementById('searchResults').style.display = 'block';\n           document.getElementById('homeHero').style.display = 'none';\n           \n           const grid = document.getElementById('searchResultsGrid');\n           grid.innerHTML = '<div class=\"loading-container\"><div class=\"spinner\"></div></div>';\n           \n           try {\n               const data = await fetchWithCache(`${baseURL}/search/multi?api_key=${API_KEY}&query=${encodeURIComponent(query)}&language=en-US`);\n               grid.innerHTML = '';\n               \n               if (!data?.results) {\n                   grid.innerHTML = '<div class=\"empty-state\">Search failed</div>';\n                   return;\n               }\n               \n               const filtered = data.results.filter(item => item.media_type === 'movie' || item.media_type === 'tv');\n               \n               if (filtered.length === 0) {\n                   grid.innerHTML = '<div class=\"empty-state\">No results found</div>';\n                   return;\n               }\n               \n               for (const item of filtered.slice(0, 24)) {\n                   item._cert = await getCertification(item);\n                   if (certMatchesGroup(item._cert, ratingSelect.value)) {\n                       createCard(item, grid, 0, 'card');\n                   }\n               }\n           } catch (e) {\n               grid.innerHTML = '<div class=\"empty-state\">Error loading results</div>';\n           }\n       }\n\n       async function openDetails(item) {\n           currentDetailsItem = item;\n           scrollPosition = window.pageYOffset;\n           \n           const posterUrl = item.backdrop_path \n               ? `https://image.tmdb.org/t/p/original${item.backdrop_path}` \n               : (item.poster_path ? `https://image.tmdb.org/t/p/w780${item.poster_path}` : FALLBACK_BACKDROP);\n           \n           document.getElementById('posterImage').src = posterUrl;\n           document.getElementById('posterImage').onerror = function() {\n               this.src = FALLBACK_BACKDROP;\n           };\n           \n           document.getElementById('detailsTitle').textContent = item.title || item.name;\n           document.getElementById('detailsYear').textContent = (item.release_date || item.first_air_date || '').substring(0, 4);\n           document.getElementById('detailsOverview').textContent = item.overview || 'No overview available.';\n           document.getElementById('detailsRating').textContent = item._cert || 'NR';\n           document.getElementById('matchScore').textContent = `${Math.floor(Math.random() * 15 + 85)}% Match`;\n           \n           const isTvShow = item.media_type === 'tv' || item.first_air_date;\n           \n           if (isTvShow) {\n               document.getElementById('detailsRuntime').textContent = `${item.number_of_seasons || '?'} Seasons`;\n               document.getElementById('episodeSelector').style.display = 'block';\n               await loadTvSeasons(item.id);\n           } else {\n               document.getElementById('detailsRuntime').textContent = `${item.runtime || '?'} min`;\n               document.getElementById('episodeSelector').style.display = 'none';\n           }\n           \n           const genres = await getGenreNames(item.genre_ids);\n           document.getElementById('detailsGenre').textContent = genres;\n           \n           updateDetailsListButton();\n           await loadCast(item);\n           \n           document.body.classList.add('modal-open');\n           detailsModal.classList.add('active');\n       }\n\n       function closeDetails() {\n           detailsModal.classList.remove('active');\n           document.body.classList.remove('modal-open');\n           document.getElementById('posterImage').src = '';\n           currentDetailsItem = null;\n           setTimeout(() => window.scrollTo(0, scrollPosition), 10);\n       }\n\n       function closeDetailsOnBackdrop(e) {\n           if (e.target === detailsModal) closeDetails();\n       }\n\n       async function loadTvSeasons(tvId) {\n           const data = await fetchWithCache(`${baseURL}/tv/${tvId}?api_key=${API_KEY}&language=en-US`);\n           tvSeasonsData = data?.seasons?.filter(s => s.season_number > 0) || [];\n           \n           const seasonSelect = document.getElementById('seasonSelect');\n           seasonSelect.innerHTML = '<option value=\"\">Select</option>';\n           tvSeasonsData.forEach(s => {\n               const opt = document.createElement('option');\n               opt.value = s.season_number;\n               opt.textContent = `S${s.season_number} (${s.episode_count} eps)`;\n               seasonSelect.appendChild(opt);\n           });\n           \n           if (tvSeasonsData.length > 0) {\n               seasonSelect.value = tvSeasonsData[0].season_number;\n               await onSeasonChange();\n           }\n       }\n\n       async function onSeasonChange() {\n           const seasonNum = document.getElementById('seasonSelect').value;\n           if (!seasonNum) return;\n           \n           const data = await fetchWithCache(`${baseURL}/tv/${currentDetailsItem.id}/season/${seasonNum}?api_key=${API_KEY}&language=en-US`);\n           const episodeSelect = document.getElementById('episodeSelect');\n           episodeSelect.innerHTML = '<option value=\"\">Select</option>';\n           \n           data?.episodes?.forEach(ep => {\n               const opt = document.createElement('option');\n               opt.value = ep.episode_number;\n               opt.textContent = `E${ep.episode_number}: ${ep.name}`;\n               episodeSelect.appendChild(opt);\n           });\n           \n           if (data?.episodes?.length > 0) {\n               episodeSelect.value = 1;\n               updateEpisodeInfo(data.episodes[0]);\n           }\n       }\n\n       function onEpisodeChange() {\n           const season = document.getElementById('seasonSelect').value;\n           const episode = document.getElementById('episodeSelect').value;\n           if (season && episode) {\n               document.getElementById('episodeInfo').textContent = `Season ${season}, Episode ${episode}`;\n           }\n       }\n\n       function updateEpisodeInfo(episode) {\n           document.getElementById('episodeInfo').textContent = episode?.overview \n               ? episode.overview.substring(0, 100) + '...' \n               : `Episode ${episode.episode_number}`;\n       }\n\n       async function getGenreNames(ids) {\n           if (!ids?.length) return 'Various';\n           const data = await fetchWithCache(`${baseURL}/genre/movie/list?api_key=${API_KEY}`);\n           const names = ids.map(id => data?.genres?.find(g => g.id === id)?.name).filter(Boolean);\n           return names.slice(0, 3).join(', ') || 'Various';\n       }\n\n       async function loadCast(item) {\n           const container = document.getElementById('detailsCast');\n           container.innerHTML = '';\n           \n           const endpoint = item.media_type === 'tv' || item.first_air_date ? 'tv' : 'movie';\n           const data = await fetchWithCache(`${baseURL}/${endpoint}/${item.id}/credits?api_key=${API_KEY}`);\n           \n           const cast = data?.cast?.slice(0, 6) || [];\n           if (cast.length === 0) {\n               container.innerHTML = '<div class=\"cast-member\">Cast unavailable</div>';\n               return;\n           }\n           \n           cast.forEach(actor => {\n               const div = document.createElement('div');\n               div.className = 'cast-member';\n               div.textContent = actor.name;\n               container.appendChild(div);\n           });\n       }\n\n       function playContent() {\n           if (!currentDetailsItem) return;\n           \n           addToContinueWatching(currentDetailsItem, 0, currentDetailsItem.runtime ? currentDetailsItem.runtime * 60 : 7200);\n           \n           const isTvShow = currentDetailsItem.media_type === 'tv' || currentDetailsItem.first_air_date;\n           const season = isTvShow ? (document.getElementById('seasonSelect').value || 1) : null;\n           const episode = isTvShow ? (document.getElementById('episodeSelect').value || 1) : null;\n           \n           const server = SERVERS[currentServer] || SERVERS['1'];\n           const src = server.buildUrl(currentDetailsItem.id, isTvShow, season, episode);\n           \n           console.log('Loading stream from:', src);\n           \n           detailsModal.classList.remove('active');\n           setTimeout(() => {\n               document.getElementById('playerIframe').src = src;\n               playerModal.classList.add('active');\n           }, 300);\n       }\n\n       function closePlayer() {\n           playerModal.classList.remove('active');\n           document.getElementById('playerIframe').src = '';\n           if (currentDetailsItem) {\n               setTimeout(() => detailsModal.classList.add('active'), 300);\n           } else {\n               document.body.classList.remove('modal-open');\n           }\n       }\n\n       function closePlayerOnBackdrop(e) {\n           if (e.target === playerModal) closePlayer();\n       }\n\n       function downloadContent() {\n           if (!currentDetailsItem) return;\n           const isTvShow = currentDetailsItem.media_type === 'tv' || currentDetailsItem.first_air_date;\n           let url;\n           if (isTvShow) {\n               const season = document.getElementById('seasonSelect').value || 1;\n               const episode = document.getElementById('episodeSelect').value || 1;\n               url = `https://dl.vidsrc.vip/tv/${currentDetailsItem.id}/${season}/${episode}`;\n           } else {\n               url = `https://dl.vidsrc.vip/movie/${currentDetailsItem.id}`;\n           }\n           window.open(url, '_blank');\n           showToast('Download started', 'success');\n       }\n\n       function addToContinueWatching(item, progress, duration) {\n           const idx = continueWatching.findIndex(i => i.id === item.id);\n           const data = { ...item, progress, duration, lastWatched: new Date().toISOString() };\n           if (idx !== -1) continueWatching.splice(idx, 1);\n           continueWatching.unshift(data);\n           if (continueWatching.length > 15) continueWatching = continueWatching.slice(0, 15);\n           localStorage.setItem('gnStreamContinue', JSON.stringify(continueWatching));\n       }\n\n       async function loadCategory(endpoint, containerId, type, genreId = null, cardSize = 'card') {\n           const container = document.getElementById(containerId);\n           container.innerHTML = '<div class=\"loading-container\"><div class=\"spinner\"></div></div>';\n           \n           let url = `${baseURL}${endpoint}?api_key=${API_KEY}&language=en-US`;\n           if (genreId) url += `&with_genres=${genreId}`;\n           \n           const data = await fetchWithCache(url);\n           container.innerHTML = '';\n           \n           if (!data?.results) {\n               container.innerHTML = '<div class=\"empty-state\">Failed to load</div>';\n               return;\n           }\n           \n           const items = data.results.slice(0, 16);\n           \n           for (const item of items) {\n               item.media_type = type;\n               item._cert = await getCertification(item);\n               createCard(item, container, 0, cardSize);\n           }\n       }\n\n       async function loadDiscoverMore() {\n           if (isLoadingDiscover || discoverTotalLoaded >= DISCOVER_TOTAL_TARGET) return;\n           \n           isLoadingDiscover = true;\n           const btn = document.getElementById('loadMoreBtn');\n           const container = document.getElementById('discoverGrid');\n           \n           btn.classList.add('loading');\n           btn.disabled = true;\n           \n           try {\n               const endpoints = [\n                   `/movie/popular?api_key=${API_KEY}&language=en-US&page=${discoverPage}`,\n                   `/tv/popular?api_key=${API_KEY}&language=en-US&page=${discoverPage}`,\n                   `/movie/top_rated?api_key=${API_KEY}&language=en-US&page=${discoverPage}`,\n                   `/tv/top_rated?api_key=${API_KEY}&language=en-US&page=${discoverPage}`\n               ];\n               \n               const shuffled = endpoints.sort(() => 0.5 - Math.random()).slice(0, 2);\n               const results = await Promise.all(shuffled.map(url => fetchWithCache(`${baseURL}${url}`)));\n               \n               let newItems = [];\n               results.forEach(data => {\n                   if (data?.results) {\n                       newItems = newItems.concat(data.results);\n                   }\n               });\n               \n               const seen = new Set();\n               newItems = newItems.filter(item => {\n                   if (seen.has(item.id)) return false;\n                   seen.add(item.id);\n                   return true;\n               });\n               \n               for (const item of newItems.slice(0, 20)) {\n                   if (discoverTotalLoaded >= DISCOVER_TOTAL_TARGET) break;\n                   \n                   item.media_type = item.first_air_date ? 'tv' : 'movie';\n                   item._cert = await getCertification(item);\n                   \n                   if (!document.querySelector(`.discover-grid .card[data-id=\"${item.id}\"]`)) {\n                       createCard(item, container, 0, 'card');\n                       discoverTotalLoaded++;\n                   }\n               }\n               \n               discoverPage++;\n               document.getElementById('totalMovies').textContent = `${discoverTotalLoaded}+`;\n               \n               if (discoverTotalLoaded >= DISCOVER_TOTAL_TARGET) {\n                   btn.textContent = 'All Titles Loaded';\n                   btn.disabled = true;\n                   showToast(`Loaded ${discoverTotalLoaded} movies and shows!`, 'success');\n               } else {\n                   btn.textContent = `Load More (${discoverTotalLoaded}/${DISCOVER_TOTAL_TARGET})`;\n               }\n               \n           } catch (error) {\n               console.error('Error loading discover more:', error);\n               showToast('Failed to load more titles', 'error');\n           } finally {\n               btn.classList.remove('loading');\n               btn.disabled = false;\n               isLoadingDiscover = false;\n           }\n       }\n\n       document.addEventListener('keydown', (e) => {\n           if (e.key === 'Escape') {\n               if (playerModal.classList.contains('active')) closePlayer();\n               else if (detailsModal.classList.contains('active')) closeDetails();\n           }\n       });\n\n       const observerOptions = {\n           root: null,\n           rootMargin: '100px',\n           threshold: 0.1\n       };\n\n       const discoverObserver = new IntersectionObserver((entries) => {\n           entries.forEach(entry => {\n               if (entry.isIntersecting && !isLoadingDiscover && discoverTotalLoaded < DISCOVER_TOTAL_TARGET) {\n                   // Auto-load disabled - manual only\n               }\n           });\n       }, observerOptions);\n\n       updateMyListCount();\n       if (continueWatching.length > 0) {\n           document.getElementById('continueWatchingSection').style.display = 'block';\n           renderContinueWatching();\n       }\n       \n       loadCategory('/trending/all/day', 'trendingRow', 'movie', null, CARD_SIZES.TRENDING);\n       loadCategory('/discover/movie', 'actionRow', 'movie', GENRES.ACTION, CARD_SIZES.ACTION);\n       loadCategory('/discover/movie', 'comedyRow', 'movie', GENRES.COMEDY, CARD_SIZES.COMEDY);\n       loadCategory('/discover/movie', 'horrorRow', 'movie', GENRES.HORROR, CARD_SIZES.HORROR);\n       loadCategory('/discover/movie', 'scifiRow', 'movie', GENRES.SCIFI, CARD_SIZES.SCIFI);\n       loadCategory('/discover/movie', 'romanceRow', 'movie', GENRES.ROMANCE, CARD_SIZES.ROMANCE);\n       loadCategory('/discover/movie', 'thrillerRow', 'movie', GENRES.THRILLER, CARD_SIZES.THRILLER);\n       loadCategory('/discover/movie', 'dramaRow', 'movie', GENRES.DRAMA, CARD_SIZES.DRAMA);\n       loadCategory('/discover/movie', 'animationRow', 'movie', GENRES.ANIMATION, CARD_SIZES.ANIMATION);\n       loadCategory('/discover/movie', 'documentaryRow', 'movie', GENRES.DOCUMENTARY, CARD_SIZES.DOCUMENTARY);\n       loadCategory('/discover/movie', 'crimeRow', 'movie', GENRES.CRIME, CARD_SIZES.CRIME);\n       loadCategory('/discover/movie', 'mysteryRow', 'movie', GENRES.MYSTERY, CARD_SIZES.MYSTERY);\n       loadCategory('/discover/movie', 'fantasyRow', 'movie', GENRES.FANTASY, CARD_SIZES.FANTASY);\n       loadCategory('/discover/movie', 'familyRow', 'movie', GENRES.FAMILY, CARD_SIZES.FAMILY);\n       loadCategory('/discover/movie', 'adventureRow', 'movie', GENRES.ADVENTURE, CARD_SIZES.ADVENTURE);\n       loadCategory('/movie/popular', 'popularMoviesRow', 'movie', null, CARD_SIZES.MOVIES);\n       loadCategory('/tv/popular', 'popularTvRow', 'tv', null, CARD_SIZES.TV);\n       \n       loadDiscoverMore();\n       loadDiscoverMore();\n       \n       discoverObserver.observe(document.getElementById('loadMoreBtn'));\n   </script>\n</body>\n</html>"
  },
  "style": {
    "language": "css",
    "content": ""
  },
  "script": {
    "language": "javascript",
    "content": ""
  },
  "stylesheets": [],
  "scripts": [],
  "cssPreset": "",
  "processors": [],
  "customSettings": {},
  "imports": {},
  "types": {},
  "tests": {
    "language": "typescript",
    "content": ""
  },
  "version": "48"
}